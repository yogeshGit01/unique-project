{"version":3,"sources":["webpack:///resources/js/2e230dc849b54ad62fd820.js","webpack:///./src/app/components/journey/app-retrieval/app-retrieval.component.html","webpack:///./src/app/components/journey/app-retrieval/app-retrieval.component.js","webpack:///./src/app/components/journey/app-retrieval/app-retrieval.component.service.js"],"names":["webpackJsonp","./src/app/components/journey/app-retrieval/app-retrieval.component.html","module","exports","./src/app/components/journey/app-retrieval/app-retrieval.component.js","__webpack_require__","angular","retrieval","component","template","controller","$scope","$state","$anchorScroll","$rootScope","analyticService","UtilService","vm","this","$onInit","sessionError","initControls","trackPageLoad","pageList","retrieve","model","phoneCode","getDataFromStorage","primaryApplicant","pan","stateData","clearAppData","nonEdit","error","next","valid","data","dialCode","mobile","mobileNo","securityParams","robocheck","retrievalApp","then","result","success","responseData","otpData","arn","txnId","console","log","JSON","stringify","setDataInStorage","go","email","buttonList","buttonClick","event_content","trackUserAction","submitted","focusOnInvalid","retrievalForm","$name","name","./src/app/components/journey/app-retrieval/app-retrieval.component.scss","./src/app/components/journey/app-retrieval/app-retrieval.component.service.js","service","appState","$http","CONFIG","formDetails","callback","arnData","merge","getApplicationData","setApplicationData","params","apiURL","httpMethod","integrationsActive","apiUrl","Math","random","method","url","headers","Content-Type","response","status","validationErrors","removeApplicationData","clearContactDetails"],"mappings":"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","file":"resources/js/2e230dc849b54ad62fd820.js","sourcesContent":["webpackJsonp([20],{\n\n/***/ \"./src/app/components/journey/app-retrieval/app-retrieval.component.html\":\n/* unknown exports provided */\n/* all exports used */\n/*!*******************************************************************************!*\\\n  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.html ***!\n  \\*******************************************************************************/\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"view-container header-spacer\\\"> <form name=retrievalForm autocomplete=off focus-on-error novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h1 class=\\\"h3 no-margin-t\\\" tabindex=0>Retrieve Application </h1></div> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h2 class=\\\"brand-bar no-margin-top\\\" tabindex=0>Please enter the details below to retrieve your application. </h2></div> </div> <alert-msg ng-if=$ctrl.error type=ERROR> Sorry - that input did not match our records. Please check and re-enter your PAN and mobile number for validation. </alert-msg> <alert-msg ng-if=$ctrl.sessionError type=ERROR> Your session has timed out due to inactivity. </alert-msg> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=form-group> <label for=pan>PAN</label> <div ng-class=\\\"{'has-error': retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.model.submitted)}\\\"> <input type=text id=pan aria-describedby=panErrMsg trim auto-caps class=form-control alpha-num=10 ng-paste=$ctrl.pasteInput(1,$event) name=pan ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder=\\\"As per ID\\\" ng-disabled=$ctrl.nonEdit aria-invalid=\\\"{{retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.model.submitted)}}\\\" required> </div> <div id=panErrMsg ng-class=\\\"{'has-error': (retrievalForm.pan.$invalid)}\\\"> <validation-msg ng-if=\\\"(retrievalForm.pan.$error.required && retrievalForm.pan.$touched) ||(retrievalForm.pan.$error.required && $ctrl.model.submitted)\\\"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.pan.$error.pattern && retrievalForm.pan.$touched\\\"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=mobileNo>Mobile number</label> <div class=input-group ng-class=\\\"{'has-error': retrievalForm.mobileNo.$invalid  &&  (retrievalForm.mobileNo.$touched  || $ctrl.model.submitted)}\\\"> <span class=input-group-addon id=countryCode aria-hidden=true tabindex=-1> <span class=\\\"flag in\\\" style=background-image:url(resources/images/country-flags-sprite.png)></span> +91</span> <input type=tel trim id=mobileNo name=mobileNo aria-describedby=\\\"countryCode mobileErrMsg\\\" ng-model=$ctrl.model.mobileNo class=\\\"form-control has-block\\\" ng-minlength=10 ng-maxlength=10 ng-pattern=/^[6-9][0-9]/ only-number=10 aria-invalid=\\\"{{retrievalForm.mobileNo.$invalid  &&  (retrievalForm.mobileNo.$touched  || $ctrl.model.submitted)}}\\\" required> </div> <div id=mobileErrMsg ng-class=\\\"{'has-error': (retrievalForm.mobileNo.$invalid)}\\\"> <validation-msg ng-if=\\\"(retrievalForm.mobileNo.$error.required && retrievalForm.mobileNo.$touched) ||(retrievalForm.mobileNo.$error.required && $ctrl.model.submitted)\\\"> Please enter your mobile number to retrieve your application. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.mobileNo.$error.minlength && retrievalForm.mobileNo.$touched\\\"> Please enter at least 10 numbers. </validation-msg> <validation-msg ng-if=\\\"!retrievalForm.mobileNo.$error.minlength && retrievalForm.mobileNo.$error.pattern && retrievalForm.mobileNo.$touched && !retrievalForm.mobileNo.$error.minlength\\\"> Your mobile phone number must begin with 6, 7, 8 or 9. Please check and re-enter. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <hr class=line-spacer> </div> </div> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12 text-right\\\"> <button class=\\\"button-primary no-margin-t-xs\\\" ng-click=$ctrl.next(retrievalForm.$valid)>Continue</button> </div> </div> </form> </div>\";\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/app-retrieval/app-retrieval.component.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*****************************************************************************!*\\\n  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.js ***!\n  \\*****************************************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n(function () {\r\n    'use strict';\r\n    var angular = __webpack_require__(/*! angular */ \"./node_modules/angular/index.js\");\r\n    __webpack_require__(/*! ./app-retrieval.component.scss */ \"./src/app/components/journey/app-retrieval/app-retrieval.component.scss\");\r\n    __webpack_require__(/*! ./app-retrieval.component.service */ \"./src/app/components/journey/app-retrieval/app-retrieval.component.service.js\");\r\n    // require('./journey.component.scss');\r\n    // require('./select.css');\r\n\r\n    var retrieval = angular.module('app').component('retrieval', {\r\n        template: __webpack_require__(/*! ./app-retrieval.component.html */ \"./src/app/components/journey/app-retrieval/app-retrieval.component.html\"),\r\n        controller: ['$scope', '$state', '$anchorScroll', '$rootScope', 'analyticService', 'retrieval', 'UtilService', function ($scope, $state, $anchorScroll, $rootScope, analyticService, retrieval, UtilService) {\r\n            var vm = this;\r\n\r\n            vm.$onInit = function () {\r\n                vm.sessionError = $rootScope.sessionError;\r\n                vm.initControls();\r\n                analyticService.trackPageLoad(analyticService.pageList.retrieve);\r\n                $anchorScroll();\r\n            };\r\n\r\n            vm.initControls = function () {\r\n                vm.model = {};\r\n                vm.model.phoneCode = \"91\";\r\n                if (retrieval.getDataFromStorage()) {\r\n                    if (retrieval.getDataFromStorage().primaryApplicant) {\r\n                        vm.model.pan = retrieval.getDataFromStorage().primaryApplicant.pan ? retrieval.getDataFromStorage().primaryApplicant.pan : null;\r\n                    }\r\n                    else if (retrieval.getDataFromStorage().stateData) {\r\n                        vm.model.pan = retrieval.getDataFromStorage().stateData.pan ? retrieval.getDataFromStorage().stateData.pan : null;\r\n                    } else {\r\n                        vm.model.pan = null;\r\n                    }\r\n                    retrieval.clearAppData();\r\n                }\r\n                if (vm.model.pan) {\r\n                    vm.nonEdit = true;\r\n                } else {\r\n                    vm.nonEdit = false;\r\n                }\r\n                vm.error = false;\r\n            };\r\n\r\n            vm.next = function (valid) {\r\n                 $rootScope.sessionError = false;\r\n                 vm.sessionError = false;\r\n                if (valid) {\r\n                    var data = {\r\n                        \"pan\": vm.model.pan,\r\n                        \"dialCode\": vm.model.phoneCode,\r\n                        \"mobile\": vm.model.mobileNo\r\n                    };\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    retrieval.retrievalApp(data, securityParams).then(function (result) {\r\n                        if (result.success) {\r\n                            vm.error = false;\r\n                            var responseData = {\r\n                                \"stateData\": {\r\n                                    \"otpData\": {\r\n                                        \"pan\": vm.model.pan,\r\n                                        \"arn\": result.arn,\r\n                                        \"dialCode\": vm.model.phoneCode,\r\n                                        \"mobile\": vm.model.mobileNo,\r\n                                        \"txnId\": result.txnId\r\n                                    }\r\n                                }\r\n                            };\r\n                            console.log(\"Data received from backend==\"+JSON.stringify(responseData));\r\n                            retrieval.setDataInStorage(responseData, function () {\r\n                                $state.go('app.journey.otp-verify', {\r\n                                    otpData: {\r\n                                        pan: vm.model.pan,\r\n                                        mobile: vm.model.mobileNo,\r\n                                        dialCode: vm.model.phoneCode,\r\n                                        email: 'sk@sk.com',\r\n                                        arn: result.arn,\r\n                                        txnId: result.txnId\r\n                                    }\r\n                                });\r\n                            });\r\n                        } else {\r\n                            vm.error = true;\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"Retrive Application Input: Continue\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    vm.model.submitted = true;\r\n                    UtilService.focusOnInvalid($scope.retrievalForm.$name);\r\n                }\r\n            }\r\n        }]\r\n    });\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/app-retrieval/app-retrieval.component.scss\":\n/* unknown exports provided */\n/* all exports used */\n/*!*******************************************************************************!*\\\n  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.scss ***!\n  \\*******************************************************************************/\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/app-retrieval/app-retrieval.component.service.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*************************************************************************************!*\\\n  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.service.js ***!\n  \\*************************************************************************************/\n/***/ (function(module, exports) {\n\n(function () {\r\n    'use strict';\r\n\r\n    var retrieval = angular.module('app').service('retrieval', ['$rootScope', 'appState', '$http', 'CONFIG', function ($rootScope, appState, $http, CONFIG) {\r\n\r\n        this.setDataInStorage = function (formDetails, callback) {\r\n            var arnData = angular.merge({}, appState.getApplicationData(), formDetails);\r\n            appState.setApplicationData(arnData);\r\n            callback(null, formDetails);\r\n        };\r\n\r\n        this.retrievalApp = function (data, params) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/retrieveapplication/otpgenerate' + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/otp-verify/retrieve_otp_generate.json';\r\n            }\r\n\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(data),\r\n                params: params\r\n            }).then(function (response) {\r\n                if (response && response.status === 200 && response.data) {\r\n                    return response.data;\r\n                } else if (response && response.validationErrors) {\r\n                    //return pageError = \"Please ensure the values added in form fields are appropriate, and retry.\";\r\n                } else {\r\n                    //Need to display \"response\" below page heading (above form).\r\n                    //vm.pageError = \"Some error occurred on the server side. Please try after some time.\";\r\n                }\r\n                return;\r\n            }, function (response) {\r\n                return;\r\n            });\r\n        };\r\n\r\n        this.getDataFromStorage = function () {\r\n            return appState.getApplicationData();\r\n        };\r\n\r\n        this.clearAppData = function () {\r\n            appState.removeApplicationData();\r\n            appState.clearContactDetails();\r\n        };\r\n\r\n    }]);\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// resources/js/2e230dc849b54ad62fd820.js","module.exports = \"<div class=\\\"view-container header-spacer\\\"> <form name=retrievalForm autocomplete=off focus-on-error novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h1 class=\\\"h3 no-margin-t\\\" tabindex=0>Retrieve Application </h1></div> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h2 class=\\\"brand-bar no-margin-top\\\" tabindex=0>Please enter the details below to retrieve your application. </h2></div> </div> <alert-msg ng-if=$ctrl.error type=ERROR> Sorry - that input did not match our records. Please check and re-enter your PAN and mobile number for validation. </alert-msg> <alert-msg ng-if=$ctrl.sessionError type=ERROR> Your session has timed out due to inactivity. </alert-msg> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=form-group> <label for=pan>PAN</label> <div ng-class=\\\"{'has-error': retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.model.submitted)}\\\"> <input type=text id=pan aria-describedby=panErrMsg trim auto-caps class=form-control alpha-num=10 ng-paste=$ctrl.pasteInput(1,$event) name=pan ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder=\\\"As per ID\\\" ng-disabled=$ctrl.nonEdit aria-invalid=\\\"{{retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.model.submitted)}}\\\" required> </div> <div id=panErrMsg ng-class=\\\"{'has-error': (retrievalForm.pan.$invalid)}\\\"> <validation-msg ng-if=\\\"(retrievalForm.pan.$error.required && retrievalForm.pan.$touched) ||(retrievalForm.pan.$error.required && $ctrl.model.submitted)\\\"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.pan.$error.pattern && retrievalForm.pan.$touched\\\"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=mobileNo>Mobile number</label> <div class=input-group ng-class=\\\"{'has-error': retrievalForm.mobileNo.$invalid  &&  (retrievalForm.mobileNo.$touched  || $ctrl.model.submitted)}\\\"> <span class=input-group-addon id=countryCode aria-hidden=true tabindex=-1> <span class=\\\"flag in\\\" style=background-image:url(resources/images/country-flags-sprite.png)></span> +91</span> <input type=tel trim id=mobileNo name=mobileNo aria-describedby=\\\"countryCode mobileErrMsg\\\" ng-model=$ctrl.model.mobileNo class=\\\"form-control has-block\\\" ng-minlength=10 ng-maxlength=10 ng-pattern=/^[6-9][0-9]/ only-number=10 aria-invalid=\\\"{{retrievalForm.mobileNo.$invalid  &&  (retrievalForm.mobileNo.$touched  || $ctrl.model.submitted)}}\\\" required> </div> <div id=mobileErrMsg ng-class=\\\"{'has-error': (retrievalForm.mobileNo.$invalid)}\\\"> <validation-msg ng-if=\\\"(retrievalForm.mobileNo.$error.required && retrievalForm.mobileNo.$touched) ||(retrievalForm.mobileNo.$error.required && $ctrl.model.submitted)\\\"> Please enter your mobile number to retrieve your application. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.mobileNo.$error.minlength && retrievalForm.mobileNo.$touched\\\"> Please enter at least 10 numbers. </validation-msg> <validation-msg ng-if=\\\"!retrievalForm.mobileNo.$error.minlength && retrievalForm.mobileNo.$error.pattern && retrievalForm.mobileNo.$touched && !retrievalForm.mobileNo.$error.minlength\\\"> Your mobile phone number must begin with 6, 7, 8 or 9. Please check and re-enter. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <hr class=line-spacer> </div> </div> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12 text-right\\\"> <button class=\\\"button-primary no-margin-t-xs\\\" ng-click=$ctrl.next(retrievalForm.$valid)>Continue</button> </div> </div> </form> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/app-retrieval/app-retrieval.component.html\n// module id = ./src/app/components/journey/app-retrieval/app-retrieval.component.html\n// module chunks = 20","(function () {\r\n    'use strict';\r\n    var angular = require('angular');\r\n    require('./app-retrieval.component.scss');\r\n    require('./app-retrieval.component.service');\r\n    // require('./journey.component.scss');\r\n    // require('./select.css');\r\n\r\n    var retrieval = angular.module('app').component('retrieval', {\r\n        template: require('./app-retrieval.component.html'),\r\n        controller: ['$scope', '$state', '$anchorScroll', '$rootScope', 'analyticService', 'retrieval', 'UtilService', function ($scope, $state, $anchorScroll, $rootScope, analyticService, retrieval, UtilService) {\r\n            var vm = this;\r\n\r\n            vm.$onInit = function () {\r\n                vm.sessionError = $rootScope.sessionError;\r\n                vm.initControls();\r\n                analyticService.trackPageLoad(analyticService.pageList.retrieve);\r\n                $anchorScroll();\r\n            };\r\n\r\n            vm.initControls = function () {\r\n                vm.model = {};\r\n                vm.model.phoneCode = \"91\";\r\n                if (retrieval.getDataFromStorage()) {\r\n                    if (retrieval.getDataFromStorage().primaryApplicant) {\r\n                        vm.model.pan = retrieval.getDataFromStorage().primaryApplicant.pan ? retrieval.getDataFromStorage().primaryApplicant.pan : null;\r\n                    }\r\n                    else if (retrieval.getDataFromStorage().stateData) {\r\n                        vm.model.pan = retrieval.getDataFromStorage().stateData.pan ? retrieval.getDataFromStorage().stateData.pan : null;\r\n                    } else {\r\n                        vm.model.pan = null;\r\n                    }\r\n                    retrieval.clearAppData();\r\n                }\r\n                if (vm.model.pan) {\r\n                    vm.nonEdit = true;\r\n                } else {\r\n                    vm.nonEdit = false;\r\n                }\r\n                vm.error = false;\r\n            };\r\n\r\n            vm.next = function (valid) {\r\n                 $rootScope.sessionError = false;\r\n                 vm.sessionError = false;\r\n                if (valid) {\r\n                    var data = {\r\n                        \"pan\": vm.model.pan,\r\n                        \"dialCode\": vm.model.phoneCode,\r\n                        \"mobile\": vm.model.mobileNo\r\n                    };\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    retrieval.retrievalApp(data, securityParams).then(function (result) {\r\n                        if (result.success) {\r\n                            vm.error = false;\r\n                            var responseData = {\r\n                                \"stateData\": {\r\n                                    \"otpData\": {\r\n                                        \"pan\": vm.model.pan,\r\n                                        \"arn\": result.arn,\r\n                                        \"dialCode\": vm.model.phoneCode,\r\n                                        \"mobile\": vm.model.mobileNo,\r\n                                        \"txnId\": result.txnId\r\n                                    }\r\n                                }\r\n                            };\r\n                            console.log(\"Data received from backend==\"+JSON.stringify(responseData));\r\n                            retrieval.setDataInStorage(responseData, function () {\r\n                                $state.go('app.journey.otp-verify', {\r\n                                    otpData: {\r\n                                        pan: vm.model.pan,\r\n                                        mobile: vm.model.mobileNo,\r\n                                        dialCode: vm.model.phoneCode,\r\n                                        email: 'sk@sk.com',\r\n                                        arn: result.arn,\r\n                                        txnId: result.txnId\r\n                                    }\r\n                                });\r\n                            });\r\n                        } else {\r\n                            vm.error = true;\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"Retrive Application Input: Continue\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    vm.model.submitted = true;\r\n                    UtilService.focusOnInvalid($scope.retrievalForm.$name);\r\n                }\r\n            }\r\n        }]\r\n    });\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/app-retrieval/app-retrieval.component.js\n// module id = ./src/app/components/journey/app-retrieval/app-retrieval.component.js\n// module chunks = 20","(function () {\r\n    'use strict';\r\n\r\n    var retrieval = angular.module('app').service('retrieval', ['$rootScope', 'appState', '$http', 'CONFIG', function ($rootScope, appState, $http, CONFIG) {\r\n\r\n        this.setDataInStorage = function (formDetails, callback) {\r\n            var arnData = angular.merge({}, appState.getApplicationData(), formDetails);\r\n            appState.setApplicationData(arnData);\r\n            callback(null, formDetails);\r\n        };\r\n\r\n        this.retrievalApp = function (data, params) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/retrieveapplication/otpgenerate' + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/otp-verify/retrieve_otp_generate.json';\r\n            }\r\n\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(data),\r\n                params: params\r\n            }).then(function (response) {\r\n                if (response && response.status === 200 && response.data) {\r\n                    return response.data;\r\n                } else if (response && response.validationErrors) {\r\n                    //return pageError = \"Please ensure the values added in form fields are appropriate, and retry.\";\r\n                } else {\r\n                    //Need to display \"response\" below page heading (above form).\r\n                    //vm.pageError = \"Some error occurred on the server side. Please try after some time.\";\r\n                }\r\n                return;\r\n            }, function (response) {\r\n                return;\r\n            });\r\n        };\r\n\r\n        this.getDataFromStorage = function () {\r\n            return appState.getApplicationData();\r\n        };\r\n\r\n        this.clearAppData = function () {\r\n            appState.removeApplicationData();\r\n            appState.clearContactDetails();\r\n        };\r\n\r\n    }]);\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/app-retrieval/app-retrieval.component.service.js\n// module id = ./src/app/components/journey/app-retrieval/app-retrieval.component.service.js\n// module chunks = 20"],"sourceRoot":""}