{"version":3,"sources":["webpack:///resources/js/17a4eb72bc75bcd4471323.js","webpack:///./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html","webpack:///./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js","webpack:///./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js"],"names":["webpackJsonp","./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html","module","exports","./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js","__webpack_require__","angular","retrieval","component","template","controller","$scope","$state","$anchorScroll","$rootScope","analyticService","staffRetrieveService","UtilService","txnId","arn","vm","this","$onInit","sessionError","errMsg","initControls","trackPageLoad","pageList","retrieve","model","getDataFromStorage","primaryApplicant","pan","stateData","clearAppData","nonEdit","generateOtp","retrievalForm","$valid","psid","securityParams","robocheck","reqData","custCaseRetrive","then","result","success","staffMobile","mobile","otpSent","showOtpSent","submitted","errorCode","buttonList","error","event_content","trackUserAction","message","buttonClick","focusOnInvalid","$name","submit","staffForm","otp","retryCount","retrieveApplication","gotoView","viewNumber","card","$emit","$broadcast","showErr","cardkey","go","cardKey","name","./src/app/components/app-retrieval-staff/app-retrieval-staff.component.scss","./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js","service","appState","$http","CONFIG","self","setDataInStorage","formDetails","callback","arnData","merge","getApplicationData","setApplicationData","setRetrievalDataInStorage","appData","setStaffJourney","kycflag","modifiedPageState","primaryApplicantDetails","modifiedPageStateContact","vcipType","vcipFlag","ekyc","ekycDone","ekycFlag","frnNumber","employmentStatus","employmentDetails","consents","dipDetails","balanceTransfer","supplementaryCard","documents","hasSkippedPerfios","isEsignLinkSent","isEsignCallback","setContactDetails","apiURL","httpMethod","integrationsActive","apiUrl","Math","random","method","url","headers","Content-Type","data","params","response","status","JSON","stringify","key","removeApplicationData"],"mappings":"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","file":"resources/js/17a4eb72bc75bcd4471323.js","sourcesContent":["webpackJsonp([23],{\n\n/***/ \"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html\":\n/* unknown exports provided */\n/* all exports used */\n/*!***********************************************************************************!*\\\n  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html ***!\n  \\***********************************************************************************/\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"view-container header-spacer\\\"> <form name=retrievalForm autocomplete=off novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h1 class=\\\"h3 no-margin-t\\\" tabindex=0>Retrieve Application </h1></div> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h2 class=\\\"brand-bar no-margin-top\\\" tabindex=0>Please enter the details below to retrieve your application. </h2></div> </div> <alert-msg ng-if=$ctrl.showOtpSent type=SUCCESS close=$ctrl.closeSuccessMsg()> Verification code has been sent to the mobile number {{$ctrl.staffMobile}}. Please click \\\"Re-send verification code\\\" if you have not received verification code </alert-msg> <alert-msg ng-if=$ctrl.errMsg type=ERROR> {{$ctrl.errMsg}} </alert-msg> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=form-group> <label for=pan>PAN</label> <div ng-class=\\\"{'has-error': retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.submitted)}\\\"> <input type=text id=pan aria-describedby=panErrMsg trim auto-caps class=form-control alpha-num=10 ng-paste=$ctrl.pasteInput(1,$event) name=pan ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder=\\\"As per ID\\\" ng-disabled=$ctrl.nonEdit aria-invalid=\\\"{{retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.submitted)}}\\\" required> </div> <div id=panErrMsg ng-class=\\\"{'has-error': (retrievalForm.pan.$invalid)}\\\"> <validation-msg ng-if=\\\"(retrievalForm.pan.$error.required && retrievalForm.pan.$touched) ||(retrievalForm.pan.$error.required && $ctrl.submitted)\\\"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.pan.$error.pattern && retrievalForm.pan.$touched\\\"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=psid>People Soft ID (PSID)</label> <div ng-class=\\\"{'has-error': retrievalForm.psid.$invalid && ($ctrl.submitted || retrievalForm.psid.$touched)}\\\"> <input trim type=tel id=psid name=psid class=form-control ng-model=$ctrl.model.psid only-number=8 ng-maxlength=8 aria-describedby=psidErrMsg aria-invalid=\\\"{{retrievalForm.psid.$invalid && ($ctrl.submitted || retrievalForm.psid.$touched)}}\\\" required> </div> <div id=psidErrMsg ng-class=\\\"{'has-error': retrievalForm.psid.$invalid}\\\"> <validation-msg ng-if=\\\"retrievalForm.psid.$error.required && (retrievalForm.psid.$touched || $ctrl.submitted)\\\"> Please enter your PSID. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.psid.$error.minlength && (retrievalForm.psid.$touched || $ctrl.submitted)\\\"> Please enter valid PSID. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <input type=checkbox id=customerInitiated name=customerInitiated class=screen-reader-only ng-focus=\\\"$ctrl.hasChkFocus = true;\\\" ng-blur=\\\"$ctrl.hasChkFocus = false;\\\" ng-model=$ctrl.model.custCaseRetrive ng-true-value=\\\"'Y'\\\" ng-false-value=\\\"'N'\\\"> <label for=customerInitiated class=checkbox-label ng-class=\\\"{'focus': $ctrl.hasChkFocus}\\\">Customer Journey Retrieval</label> </div> </div> </div> <div ng-if=$ctrl.otpSent class=line-spacer> <div class=form-group> <label for=otp>Verification code</label> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div ng-class=\\\"{'has-error': retrievalForm.otp.$invalid && ($ctrl.submitted || retrievalForm.otp.$touched)}\\\"> <input trim type=\\\"{{$ctrl.showOtp?'tel':'password'}}\\\" id=otp name=otp class=form-control ng-model=$ctrl.model.otp only-number=6 ng-minlength=6 aria-describedby=psidErrMsg aria-invalid=\\\"{{retrievalForm.otp.$invalid && ($ctrl.submitted || retrievalForm.otp.$touched)}}\\\" required/> </div> <div id=psidErrMsg ng-class=\\\"{'has-error': retrievalForm.otp.$invalid}\\\"> <validation-msg ng-if=\\\"retrievalForm.otp.$error.required && (retrievalForm.otp.$touched || $ctrl.submitted)\\\"> Please enter OTP </validation-msg> <validation-msg ng-if=\\\"retrievalForm.otp.$error.minlength && (retrievalForm.otp.$touched || $ctrl.submitted)\\\"> Invalid OTP </validation-msg> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12 line-spacer-xs\\\"> <span class=link-text ng-click=$ctrl.generateOtp(retrievalForm)>Re-send verification code</span> </div> </div> </div> <div class=\\\"form-group line-spacer\\\"> <input type=checkbox id=showOtpChk name=showOtpChk class=screen-reader-only ng-model=$ctrl.showOtp ng-focus=\\\"$ctrl.hasChkFocus = true;\\\" ng-blur=\\\"$ctrl.hasChkFocus = false;\\\"> <label for=showOtpChk class=checkbox-label ng-class=\\\"{'focus': $ctrl.hasChkFocus}\\\">Show verification code</label> </div> <p class=disclaimer> By entering the verification code above, I certify that I have met the Credit Card applicant in person (Face to Face) and have assisted the applicant to complete the application journey. </p> </div> <step-footer show-verify-code=!$ctrl.otpSent verify-code-callback=$ctrl.generateOtp(retrievalForm) show-continue=$ctrl.otpSent continue-callback=$ctrl.submit(retrievalForm)> </step-footer> </form> </div>\";\n\n/***/ }),\n\n/***/ \"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*********************************************************************************!*\\\n  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js ***!\n  \\*********************************************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n(function () {\r\n    'use strict';\r\n    var angular = __webpack_require__(/*! angular */ \"./node_modules/angular/index.js\");\r\n    __webpack_require__(/*! ./app-retrieval-staff.component.scss */ \"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.scss\");\r\n    __webpack_require__(/*! ./app-retrieval-staff.service */ \"./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js\");\r\n    // require('./journey.component.scss');\r\n    // require('./select.css');\r\n\r\n    var retrieval = angular.module('app').component('retrievalStaff', {\r\n        template: __webpack_require__(/*! ./app-retrieval-staff.component.html */ \"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html\"),\r\n        controller: ['$scope', '$state', '$anchorScroll', '$rootScope', 'analyticService', 'staffRetrieveService', 'UtilService', function ($scope, $state, $anchorScroll, $rootScope, analyticService, staffRetrieveService, UtilService) {\r\n            var vm = this, txnId, arn;\r\n\r\n            vm.$onInit = function () {\r\n                // $rootScope.sessionError = true;\r\n                if ($rootScope.sessionError) {\r\n                    vm.errMsg = \"Your session has timed out due to inactivity.\";\r\n                }\r\n                vm.initControls();\r\n                analyticService.trackPageLoad(analyticService.pageList.retrieve);\r\n                $anchorScroll();\r\n            };\r\n\r\n            vm.initControls = function () {\r\n                vm.model = {};\r\n                if (staffRetrieveService.getDataFromStorage()) {\r\n                    if (staffRetrieveService.getDataFromStorage().primaryApplicant) {\r\n                        vm.model.pan = staffRetrieveService.getDataFromStorage().primaryApplicant.pan ? staffRetrieveService.getDataFromStorage().primaryApplicant.pan : null;\r\n                    }\r\n                    else if (staffRetrieveService.getDataFromStorage().stateData) {\r\n                        vm.model.pan = staffRetrieveService.getDataFromStorage().stateData.pan ? staffRetrieveService.getDataFromStorage().stateData.pan : null;\r\n                    } else {\r\n                        vm.model.pan = null;\r\n                    }\r\n                    staffRetrieveService.clearAppData();\r\n                }\r\n                if (vm.model.pan) {\r\n                    vm.nonEdit = true;\r\n                } else {\r\n                    vm.nonEdit = false;\r\n                }\r\n                // vm.error = false;\r\n            };\r\n\r\n            vm.generateOtp = function (retrievalForm) {\r\n        \r\n                vm.errMsg = \"\";\r\n                if (retrievalForm.pan.$valid && retrievalForm.psid.$valid) {\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    var reqData = {\r\n                        pan: vm.model.pan,\r\n                        psid: vm.model.psid,\r\n                        custCaseRetrive: vm.model.custCaseRetrive\r\n                    }\r\n                    staffRetrieveService.generateOtp(reqData, securityParams).then(function (result) {\r\n                        if (result.success) {\r\n                            txnId = result.txnId;\r\n                            arn = result.arn;\r\n                            vm.staffMobile = result.mobile;\r\n                            vm.otpSent = true;\r\n                            vm.showOtpSent = true;\r\n                            vm.submitted = false;\r\n                            \r\n                        } else {\r\n                            vm.showOtpSent = false;\r\n                            if (result.errorCode === 2) {\r\n                                // No Records found\r\n                               // vm.errMsg = \"Sorry - that input did not match our records. Please check and re-enter your PAN and mobile number for validation.\";\r\n                               vm.errMsg = \"The case has already been submitted please check omniflow for further details.\";\r\n                                analyticService.buttonList.error.event_content = \"No Records found\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else if (result.errorCode === 10000) {\r\n                                // Invalid PSID: PSID doesn't exist\r\n                                vm.errMsg = \"Invalid PSID\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid PSID error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else if (result.errorCode === 10001) {\r\n                                // Inactive PSID\r\n                                vm.errMsg = \"Inactive PSID\";\r\n                                analyticService.buttonList.error.event_content = \"Inactive PSID error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }else if (result.errorCode === 100010) {\r\n                                // Invalid PAN\r\n                                vm.errMsg = \"PAN doesn't exist , kindly enter correct pan.\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid PAN error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }else if (result.errorCode === 100011) {\r\n                                // Invalid PAN\r\n                                vm.errMsg = \"Kindly click on checkbox to retrieve customer journey\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid case retrive error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }\r\n                            else if (result.errorCode === 100012) {\r\n                                // Invalid PAN\r\n                                vm.errMsg = \"Do not click on checkbox to retrieve the staff journey\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid case retrive error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }\r\n                             else {\r\n                                vm.errMsg = result.message;\r\n                            }\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"Retrive Staff Application: Generate OTP\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    // vm.otpSent = false;\r\n                    // vm.showOtpSent = false;\r\n                    vm.submitted = true;\r\n                    UtilService.focusOnInvalid($scope.retrievalForm.$name);\r\n                }\r\n            };\r\n\r\n            vm.submit = function (staffForm) {\r\n                if (staffForm.$valid) {\r\n                    vm.submitted = false;\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    var reqData = {\r\n                        txnId: txnId,\r\n                        otp: vm.model.otp,\r\n                        arn: arn,\r\n                        retryCount: 0\r\n                    }\r\n                    staffRetrieveService.retrieveApplication(reqData, securityParams).then(function (result) {\r\n                        if (result.success) {\r\n                           // alert(result.card.key);\r\n                            gotoView(result.viewNumber,result.card);\r\n                            $scope.$emit('card-selected');\r\n                            $rootScope.$broadcast(\"show-FRN\");\r\n                        } else {\r\n                            vm.submitted = true;\r\n                            vm.showOtpSent = false;\r\n                            vm.showErr = true;\r\n                            if (result.errorCode === 1005) {\r\n                                // OTP expired\r\n                                vm.errMsg = \"Expired verification code, please regenerate verification code and retry\";\r\n                                analyticService.buttonList.error.event_content = \"OTP expired error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else if (result.errorCode === 1003) {\r\n                                // Invalid OTP\r\n                                vm.errMsg = \"Invalid verification code\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid OTP error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else {\r\n                                vm.errMsg = result.message;\r\n                            }\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"Retrive Staff Application: Continue\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    vm.submitted = true;\r\n                    UtilService.focusOnInvalid($scope.retrievalForm.$name);\r\n                }\r\n            };\r\n\r\n            var gotoView = function (viewNumber,cardkey) {\r\n                switch (viewNumber) {\r\n                    // case 0:\r\n                    //     $state.go('app.journey.s4-personalDemographic');\r\n                    //     break;\r\n                    case 1:\r\n                        $state.go('app.journey.s6-incomeDetails',{'cardKey':cardkey});\r\n                        break;\r\n                    case 2:\r\n                        $state.go('app.journey.s7-review',{'cardKey':cardkey});\r\n                        break;\r\n                    case 3:\r\n                        $state.go('app.journey.card-DIP',{'cardKey':cardkey});\r\n                        break;\r\n                    case 4:\r\n                        $state.go('app.journey.balance-transfer',{'cardKey':cardkey});\r\n                        break;\r\n                    case 5:\r\n                        $state.go('app.journey.supplementary',{'cardKey':cardkey});\r\n                        break;\r\n                    case 6:\r\n                        $state.go('app.journey.document',{'cardKey':cardkey});\r\n                        break;\r\n                    case 7:\r\n                        $state.go('app.journey.signature',{'cardKey':cardkey});\r\n                        break;\r\n                    case 8:\r\n                        $state.go('app.journey.signature',{'cardKey':cardkey});\r\n                        break;\r\n                    case 9:\r\n                        $state.go('app.journey.staff-details',{'cardKey':cardkey});\r\n                        break;\r\n                    case 10:\r\n                        $state.go('app.journey.s5-employmentDetails',{'cardKey':cardkey});\r\n                        break;\r\n                    case 11:\r\n                        $state.go('app.journey.s3-personalDetails',{'cardKey':cardkey});\r\n                        break;\r\n                    default:\r\n                        $state.go('app.journey.s1-cards');\r\n                }\r\n            };\r\n        }]\r\n    });\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n/***/ }),\n\n/***/ \"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.scss\":\n/* unknown exports provided */\n/* all exports used */\n/*!***********************************************************************************!*\\\n  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.scss ***!\n  \\***********************************************************************************/\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*******************************************************************************!*\\\n  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js ***!\n  \\*******************************************************************************/\n/***/ (function(module, exports) {\n\n(function () {\r\n    'use strict';\r\n\r\n    var retrieval = angular.module('app').service('staffRetrieveService', ['$rootScope', 'appState', '$http', 'CONFIG', function ($rootScope, appState, $http, CONFIG) {\r\n        var self = this;\r\n        self.setDataInStorage = function (formDetails, callback) {\r\n            var arnData = angular.merge({}, appState.getApplicationData(), formDetails);\r\n            appState.setApplicationData(arnData);\r\n            callback(null, formDetails);\r\n        };\r\n\r\n        self.setRetrievalDataInStorage = function (appData, arn) {\r\n            appState.setStaffJourney(true);\r\n            var modifiedPageState = {\r\n                \"primaryApplicant\": appData.primaryApplicantDetails,\r\n            };\r\n            var modifiedPageStateContact = {\r\n                \"vcipType\":appData.vcipFlag,\r\n                \"ekyc\":appData.ekycDone\r\n            };\r\n            var kycflag;\r\n            if(appData.ekycFlag===null){\r\n                kycflag=appData.ekycFlag===null? false:true;\r\n            }else{\r\n                kycflag=appData.ekycFlag==='N'? false:true;\r\n            }\r\n          \r\n            // modifiedPageState.primaryApplicant.arn = arn;\r\n            // modifiedPageState.primaryApplicant.demographicDetails = appData.demographicDetails;\r\n            modifiedPageState.primaryApplicant.frnNumber = appData.frnNumber;\r\n            modifiedPageState.primaryApplicant.psid = appData.psid;\r\n            modifiedPageState.primaryApplicant.employmentStatus = appData.employmentStatus;\r\n            modifiedPageState.primaryApplicant.employmentDetails = appData.employmentDetails;\r\n            modifiedPageState.primaryApplicant.consents = appData.consents;\r\n            modifiedPageState.primaryApplicant.dipDetails = appData.dipDetails;\r\n            modifiedPageState.primaryApplicant.balanceTransfer = appData.balanceTransfer;\r\n            modifiedPageState.primaryApplicant.supplementaryCard = appData.supplementaryCard;\r\n            modifiedPageState.primaryApplicant.documents = appData.documents;\r\n            modifiedPageState.primaryApplicant.hasSkippedPerfios = appData.hasSkippedPerfios;\r\n            modifiedPageState.primaryApplicant.card = appData.card;\r\n            modifiedPageState.primaryApplicant.ekycFlag = kycflag;\r\n            // added forleegacy @akshay oct 2024\r\n            modifiedPageState.primaryApplicant.isEsignLinkSent = appData.isEsignLinkSent;\r\n            modifiedPageState.primaryApplicant.isEsignCallback = appData.isEsignCallback;\r\n            \r\n            var arnData = angular.merge({}, appState.getApplicationData(), modifiedPageState);\r\n            appState.setApplicationData(arnData);\r\n            appState.setContactDetails(modifiedPageStateContact);//to access vcip flag\r\n        };\r\n\r\n        self.generateOtp = function (reqData, securityParams) {\r\n            var apiURL, httpMethod;\r\n            // reqData = angular.merge({}, reqData, { arn: journeyService.getApplicantInfo(\"arn\") });\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + \"/staffretrieveapplication/otpgenerate\" + \"?hash_id=\" + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = \"resources/data/mock/staff-details/staff-details_generate_otp.json\"\r\n            }\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                data: reqData,\r\n                params: securityParams\r\n            }).then(function (response) {\r\n                if (response.status === 200 && response.data) {\r\n                    return response.data;\r\n                } else {\r\n                    return {\r\n                        success: false,\r\n                        message: \"Sorry! there seems to be some technical error.\"\r\n                    };\r\n                }\r\n            }, function (error) {\r\n                return {\r\n                    success: false,\r\n                    message: \"Sorry! there seems to be some technical error.\"\r\n                };\r\n            });\r\n        };\r\n\r\n        self.retrieveApplication = function (data, params) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/staffretrieveapplication/fetchapplication' + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n              //  apiURL = 'resources/data/mock/otp-verify/kyc_aadhar_pan_validate.json';\r\n              apiURL = 'resources/data/mock/otp-verify/retrieve_fetch_application.json';\r\n            }\r\n\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(data),\r\n                params: params\r\n            }).then(function (response) {\r\n                \r\n                if (response && response.status === 200 && response.data) {\r\n                    \r\n                    if (response.data.errorCode == 1) {\r\n                        self.setRetrievalDataInStorage(response.data);\r\n                        return {\r\n                            success: true,\r\n                            viewNumber: response.data.viewNumber,\r\n                            message: response.data.message,\r\n                            card:response.data.card.key,\r\n                            ekycDone: response.data.ekycDone\r\n                        }\r\n                    }\r\n                    return {\r\n                        success: false,\r\n                        errorCode: response.data.errorCode,\r\n                        message: response.data.message\r\n                    }\r\n                }\r\n                return {\r\n                    success: false\r\n                }\r\n            }, function (response) {\r\n                return;\r\n            });\r\n        };\r\n\r\n        self.getDataFromStorage = function () {\r\n            return appState.getApplicationData();\r\n        };\r\n\r\n        self.clearAppData = function () {\r\n            appState.removeApplicationData();\r\n        };\r\n\r\n    }]);\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// resources/js/17a4eb72bc75bcd4471323.js","module.exports = \"<div class=\\\"view-container header-spacer\\\"> <form name=retrievalForm autocomplete=off novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h1 class=\\\"h3 no-margin-t\\\" tabindex=0>Retrieve Application </h1></div> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h2 class=\\\"brand-bar no-margin-top\\\" tabindex=0>Please enter the details below to retrieve your application. </h2></div> </div> <alert-msg ng-if=$ctrl.showOtpSent type=SUCCESS close=$ctrl.closeSuccessMsg()> Verification code has been sent to the mobile number {{$ctrl.staffMobile}}. Please click \\\"Re-send verification code\\\" if you have not received verification code </alert-msg> <alert-msg ng-if=$ctrl.errMsg type=ERROR> {{$ctrl.errMsg}} </alert-msg> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=form-group> <label for=pan>PAN</label> <div ng-class=\\\"{'has-error': retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.submitted)}\\\"> <input type=text id=pan aria-describedby=panErrMsg trim auto-caps class=form-control alpha-num=10 ng-paste=$ctrl.pasteInput(1,$event) name=pan ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder=\\\"As per ID\\\" ng-disabled=$ctrl.nonEdit aria-invalid=\\\"{{retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.submitted)}}\\\" required> </div> <div id=panErrMsg ng-class=\\\"{'has-error': (retrievalForm.pan.$invalid)}\\\"> <validation-msg ng-if=\\\"(retrievalForm.pan.$error.required && retrievalForm.pan.$touched) ||(retrievalForm.pan.$error.required && $ctrl.submitted)\\\"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.pan.$error.pattern && retrievalForm.pan.$touched\\\"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=psid>People Soft ID (PSID)</label> <div ng-class=\\\"{'has-error': retrievalForm.psid.$invalid && ($ctrl.submitted || retrievalForm.psid.$touched)}\\\"> <input trim type=tel id=psid name=psid class=form-control ng-model=$ctrl.model.psid only-number=8 ng-maxlength=8 aria-describedby=psidErrMsg aria-invalid=\\\"{{retrievalForm.psid.$invalid && ($ctrl.submitted || retrievalForm.psid.$touched)}}\\\" required> </div> <div id=psidErrMsg ng-class=\\\"{'has-error': retrievalForm.psid.$invalid}\\\"> <validation-msg ng-if=\\\"retrievalForm.psid.$error.required && (retrievalForm.psid.$touched || $ctrl.submitted)\\\"> Please enter your PSID. </validation-msg> <validation-msg ng-if=\\\"retrievalForm.psid.$error.minlength && (retrievalForm.psid.$touched || $ctrl.submitted)\\\"> Please enter valid PSID. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <input type=checkbox id=customerInitiated name=customerInitiated class=screen-reader-only ng-focus=\\\"$ctrl.hasChkFocus = true;\\\" ng-blur=\\\"$ctrl.hasChkFocus = false;\\\" ng-model=$ctrl.model.custCaseRetrive ng-true-value=\\\"'Y'\\\" ng-false-value=\\\"'N'\\\"> <label for=customerInitiated class=checkbox-label ng-class=\\\"{'focus': $ctrl.hasChkFocus}\\\">Customer Journey Retrieval</label> </div> </div> </div> <div ng-if=$ctrl.otpSent class=line-spacer> <div class=form-group> <label for=otp>Verification code</label> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div ng-class=\\\"{'has-error': retrievalForm.otp.$invalid && ($ctrl.submitted || retrievalForm.otp.$touched)}\\\"> <input trim type=\\\"{{$ctrl.showOtp?'tel':'password'}}\\\" id=otp name=otp class=form-control ng-model=$ctrl.model.otp only-number=6 ng-minlength=6 aria-describedby=psidErrMsg aria-invalid=\\\"{{retrievalForm.otp.$invalid && ($ctrl.submitted || retrievalForm.otp.$touched)}}\\\" required/> </div> <div id=psidErrMsg ng-class=\\\"{'has-error': retrievalForm.otp.$invalid}\\\"> <validation-msg ng-if=\\\"retrievalForm.otp.$error.required && (retrievalForm.otp.$touched || $ctrl.submitted)\\\"> Please enter OTP </validation-msg> <validation-msg ng-if=\\\"retrievalForm.otp.$error.minlength && (retrievalForm.otp.$touched || $ctrl.submitted)\\\"> Invalid OTP </validation-msg> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12 line-spacer-xs\\\"> <span class=link-text ng-click=$ctrl.generateOtp(retrievalForm)>Re-send verification code</span> </div> </div> </div> <div class=\\\"form-group line-spacer\\\"> <input type=checkbox id=showOtpChk name=showOtpChk class=screen-reader-only ng-model=$ctrl.showOtp ng-focus=\\\"$ctrl.hasChkFocus = true;\\\" ng-blur=\\\"$ctrl.hasChkFocus = false;\\\"> <label for=showOtpChk class=checkbox-label ng-class=\\\"{'focus': $ctrl.hasChkFocus}\\\">Show verification code</label> </div> <p class=disclaimer> By entering the verification code above, I certify that I have met the Credit Card applicant in person (Face to Face) and have assisted the applicant to complete the application journey. </p> </div> <step-footer show-verify-code=!$ctrl.otpSent verify-code-callback=$ctrl.generateOtp(retrievalForm) show-continue=$ctrl.otpSent continue-callback=$ctrl.submit(retrievalForm)> </step-footer> </form> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html\n// module id = ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html\n// module chunks = 23","(function () {\r\n    'use strict';\r\n    var angular = require('angular');\r\n    require('./app-retrieval-staff.component.scss');\r\n    require('./app-retrieval-staff.service');\r\n    // require('./journey.component.scss');\r\n    // require('./select.css');\r\n\r\n    var retrieval = angular.module('app').component('retrievalStaff', {\r\n        template: require('./app-retrieval-staff.component.html'),\r\n        controller: ['$scope', '$state', '$anchorScroll', '$rootScope', 'analyticService', 'staffRetrieveService', 'UtilService', function ($scope, $state, $anchorScroll, $rootScope, analyticService, staffRetrieveService, UtilService) {\r\n            var vm = this, txnId, arn;\r\n\r\n            vm.$onInit = function () {\r\n                // $rootScope.sessionError = true;\r\n                if ($rootScope.sessionError) {\r\n                    vm.errMsg = \"Your session has timed out due to inactivity.\";\r\n                }\r\n                vm.initControls();\r\n                analyticService.trackPageLoad(analyticService.pageList.retrieve);\r\n                $anchorScroll();\r\n            };\r\n\r\n            vm.initControls = function () {\r\n                vm.model = {};\r\n                if (staffRetrieveService.getDataFromStorage()) {\r\n                    if (staffRetrieveService.getDataFromStorage().primaryApplicant) {\r\n                        vm.model.pan = staffRetrieveService.getDataFromStorage().primaryApplicant.pan ? staffRetrieveService.getDataFromStorage().primaryApplicant.pan : null;\r\n                    }\r\n                    else if (staffRetrieveService.getDataFromStorage().stateData) {\r\n                        vm.model.pan = staffRetrieveService.getDataFromStorage().stateData.pan ? staffRetrieveService.getDataFromStorage().stateData.pan : null;\r\n                    } else {\r\n                        vm.model.pan = null;\r\n                    }\r\n                    staffRetrieveService.clearAppData();\r\n                }\r\n                if (vm.model.pan) {\r\n                    vm.nonEdit = true;\r\n                } else {\r\n                    vm.nonEdit = false;\r\n                }\r\n                // vm.error = false;\r\n            };\r\n\r\n            vm.generateOtp = function (retrievalForm) {\r\n        \r\n                vm.errMsg = \"\";\r\n                if (retrievalForm.pan.$valid && retrievalForm.psid.$valid) {\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    var reqData = {\r\n                        pan: vm.model.pan,\r\n                        psid: vm.model.psid,\r\n                        custCaseRetrive: vm.model.custCaseRetrive\r\n                    }\r\n                    staffRetrieveService.generateOtp(reqData, securityParams).then(function (result) {\r\n                        if (result.success) {\r\n                            txnId = result.txnId;\r\n                            arn = result.arn;\r\n                            vm.staffMobile = result.mobile;\r\n                            vm.otpSent = true;\r\n                            vm.showOtpSent = true;\r\n                            vm.submitted = false;\r\n                            \r\n                        } else {\r\n                            vm.showOtpSent = false;\r\n                            if (result.errorCode === 2) {\r\n                                // No Records found\r\n                               // vm.errMsg = \"Sorry - that input did not match our records. Please check and re-enter your PAN and mobile number for validation.\";\r\n                               vm.errMsg = \"The case has already been submitted please check omniflow for further details.\";\r\n                                analyticService.buttonList.error.event_content = \"No Records found\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else if (result.errorCode === 10000) {\r\n                                // Invalid PSID: PSID doesn't exist\r\n                                vm.errMsg = \"Invalid PSID\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid PSID error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else if (result.errorCode === 10001) {\r\n                                // Inactive PSID\r\n                                vm.errMsg = \"Inactive PSID\";\r\n                                analyticService.buttonList.error.event_content = \"Inactive PSID error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }else if (result.errorCode === 100010) {\r\n                                // Invalid PAN\r\n                                vm.errMsg = \"PAN doesn't exist , kindly enter correct pan.\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid PAN error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }else if (result.errorCode === 100011) {\r\n                                // Invalid PAN\r\n                                vm.errMsg = \"Kindly click on checkbox to retrieve customer journey\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid case retrive error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }\r\n                            else if (result.errorCode === 100012) {\r\n                                // Invalid PAN\r\n                                vm.errMsg = \"Do not click on checkbox to retrieve the staff journey\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid case retrive error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            }\r\n                             else {\r\n                                vm.errMsg = result.message;\r\n                            }\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"Retrive Staff Application: Generate OTP\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    // vm.otpSent = false;\r\n                    // vm.showOtpSent = false;\r\n                    vm.submitted = true;\r\n                    UtilService.focusOnInvalid($scope.retrievalForm.$name);\r\n                }\r\n            };\r\n\r\n            vm.submit = function (staffForm) {\r\n                if (staffForm.$valid) {\r\n                    vm.submitted = false;\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    var reqData = {\r\n                        txnId: txnId,\r\n                        otp: vm.model.otp,\r\n                        arn: arn,\r\n                        retryCount: 0\r\n                    }\r\n                    staffRetrieveService.retrieveApplication(reqData, securityParams).then(function (result) {\r\n                        if (result.success) {\r\n                           // alert(result.card.key);\r\n                            gotoView(result.viewNumber,result.card);\r\n                            $scope.$emit('card-selected');\r\n                            $rootScope.$broadcast(\"show-FRN\");\r\n                        } else {\r\n                            vm.submitted = true;\r\n                            vm.showOtpSent = false;\r\n                            vm.showErr = true;\r\n                            if (result.errorCode === 1005) {\r\n                                // OTP expired\r\n                                vm.errMsg = \"Expired verification code, please regenerate verification code and retry\";\r\n                                analyticService.buttonList.error.event_content = \"OTP expired error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else if (result.errorCode === 1003) {\r\n                                // Invalid OTP\r\n                                vm.errMsg = \"Invalid verification code\";\r\n                                analyticService.buttonList.error.event_content = \"Invalid OTP error\";\r\n                                analyticService.trackUserAction(analyticService.buttonList.error);\r\n                            } else {\r\n                                vm.errMsg = result.message;\r\n                            }\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"Retrive Staff Application: Continue\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    vm.submitted = true;\r\n                    UtilService.focusOnInvalid($scope.retrievalForm.$name);\r\n                }\r\n            };\r\n\r\n            var gotoView = function (viewNumber,cardkey) {\r\n                switch (viewNumber) {\r\n                    // case 0:\r\n                    //     $state.go('app.journey.s4-personalDemographic');\r\n                    //     break;\r\n                    case 1:\r\n                        $state.go('app.journey.s6-incomeDetails',{'cardKey':cardkey});\r\n                        break;\r\n                    case 2:\r\n                        $state.go('app.journey.s7-review',{'cardKey':cardkey});\r\n                        break;\r\n                    case 3:\r\n                        $state.go('app.journey.card-DIP',{'cardKey':cardkey});\r\n                        break;\r\n                    case 4:\r\n                        $state.go('app.journey.balance-transfer',{'cardKey':cardkey});\r\n                        break;\r\n                    case 5:\r\n                        $state.go('app.journey.supplementary',{'cardKey':cardkey});\r\n                        break;\r\n                    case 6:\r\n                        $state.go('app.journey.document',{'cardKey':cardkey});\r\n                        break;\r\n                    case 7:\r\n                        $state.go('app.journey.signature',{'cardKey':cardkey});\r\n                        break;\r\n                    case 8:\r\n                        $state.go('app.journey.signature',{'cardKey':cardkey});\r\n                        break;\r\n                    case 9:\r\n                        $state.go('app.journey.staff-details',{'cardKey':cardkey});\r\n                        break;\r\n                    case 10:\r\n                        $state.go('app.journey.s5-employmentDetails',{'cardKey':cardkey});\r\n                        break;\r\n                    case 11:\r\n                        $state.go('app.journey.s3-personalDetails',{'cardKey':cardkey});\r\n                        break;\r\n                    default:\r\n                        $state.go('app.journey.s1-cards');\r\n                }\r\n            };\r\n        }]\r\n    });\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js\n// module id = ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js\n// module chunks = 23","(function () {\r\n    'use strict';\r\n\r\n    var retrieval = angular.module('app').service('staffRetrieveService', ['$rootScope', 'appState', '$http', 'CONFIG', function ($rootScope, appState, $http, CONFIG) {\r\n        var self = this;\r\n        self.setDataInStorage = function (formDetails, callback) {\r\n            var arnData = angular.merge({}, appState.getApplicationData(), formDetails);\r\n            appState.setApplicationData(arnData);\r\n            callback(null, formDetails);\r\n        };\r\n\r\n        self.setRetrievalDataInStorage = function (appData, arn) {\r\n            appState.setStaffJourney(true);\r\n            var modifiedPageState = {\r\n                \"primaryApplicant\": appData.primaryApplicantDetails,\r\n            };\r\n            var modifiedPageStateContact = {\r\n                \"vcipType\":appData.vcipFlag,\r\n                \"ekyc\":appData.ekycDone\r\n            };\r\n            var kycflag;\r\n            if(appData.ekycFlag===null){\r\n                kycflag=appData.ekycFlag===null? false:true;\r\n            }else{\r\n                kycflag=appData.ekycFlag==='N'? false:true;\r\n            }\r\n          \r\n            // modifiedPageState.primaryApplicant.arn = arn;\r\n            // modifiedPageState.primaryApplicant.demographicDetails = appData.demographicDetails;\r\n            modifiedPageState.primaryApplicant.frnNumber = appData.frnNumber;\r\n            modifiedPageState.primaryApplicant.psid = appData.psid;\r\n            modifiedPageState.primaryApplicant.employmentStatus = appData.employmentStatus;\r\n            modifiedPageState.primaryApplicant.employmentDetails = appData.employmentDetails;\r\n            modifiedPageState.primaryApplicant.consents = appData.consents;\r\n            modifiedPageState.primaryApplicant.dipDetails = appData.dipDetails;\r\n            modifiedPageState.primaryApplicant.balanceTransfer = appData.balanceTransfer;\r\n            modifiedPageState.primaryApplicant.supplementaryCard = appData.supplementaryCard;\r\n            modifiedPageState.primaryApplicant.documents = appData.documents;\r\n            modifiedPageState.primaryApplicant.hasSkippedPerfios = appData.hasSkippedPerfios;\r\n            modifiedPageState.primaryApplicant.card = appData.card;\r\n            modifiedPageState.primaryApplicant.ekycFlag = kycflag;\r\n            // added forleegacy @akshay oct 2024\r\n            modifiedPageState.primaryApplicant.isEsignLinkSent = appData.isEsignLinkSent;\r\n            modifiedPageState.primaryApplicant.isEsignCallback = appData.isEsignCallback;\r\n            \r\n            var arnData = angular.merge({}, appState.getApplicationData(), modifiedPageState);\r\n            appState.setApplicationData(arnData);\r\n            appState.setContactDetails(modifiedPageStateContact);//to access vcip flag\r\n        };\r\n\r\n        self.generateOtp = function (reqData, securityParams) {\r\n            var apiURL, httpMethod;\r\n            // reqData = angular.merge({}, reqData, { arn: journeyService.getApplicantInfo(\"arn\") });\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + \"/staffretrieveapplication/otpgenerate\" + \"?hash_id=\" + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = \"resources/data/mock/staff-details/staff-details_generate_otp.json\"\r\n            }\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                data: reqData,\r\n                params: securityParams\r\n            }).then(function (response) {\r\n                if (response.status === 200 && response.data) {\r\n                    return response.data;\r\n                } else {\r\n                    return {\r\n                        success: false,\r\n                        message: \"Sorry! there seems to be some technical error.\"\r\n                    };\r\n                }\r\n            }, function (error) {\r\n                return {\r\n                    success: false,\r\n                    message: \"Sorry! there seems to be some technical error.\"\r\n                };\r\n            });\r\n        };\r\n\r\n        self.retrieveApplication = function (data, params) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/staffretrieveapplication/fetchapplication' + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n              //  apiURL = 'resources/data/mock/otp-verify/kyc_aadhar_pan_validate.json';\r\n              apiURL = 'resources/data/mock/otp-verify/retrieve_fetch_application.json';\r\n            }\r\n\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(data),\r\n                params: params\r\n            }).then(function (response) {\r\n                \r\n                if (response && response.status === 200 && response.data) {\r\n                    \r\n                    if (response.data.errorCode == 1) {\r\n                        self.setRetrievalDataInStorage(response.data);\r\n                        return {\r\n                            success: true,\r\n                            viewNumber: response.data.viewNumber,\r\n                            message: response.data.message,\r\n                            card:response.data.card.key,\r\n                            ekycDone: response.data.ekycDone\r\n                        }\r\n                    }\r\n                    return {\r\n                        success: false,\r\n                        errorCode: response.data.errorCode,\r\n                        message: response.data.message\r\n                    }\r\n                }\r\n                return {\r\n                    success: false\r\n                }\r\n            }, function (response) {\r\n                return;\r\n            });\r\n        };\r\n\r\n        self.getDataFromStorage = function () {\r\n            return appState.getApplicationData();\r\n        };\r\n\r\n        self.clearAppData = function () {\r\n            appState.removeApplicationData();\r\n        };\r\n\r\n    }]);\r\n\r\n    module.exports = retrieval.name;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js\n// module id = ./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js\n// module chunks = 23"],"sourceRoot":""}