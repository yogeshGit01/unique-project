{"version":3,"sources":["webpack:///resources/js/1bd7aa6edc9e513029404.js","webpack:///./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.html","webpack:///./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.js","webpack:///./src/app/components/journey/step5/skip-modal/skip-modal.component.html","webpack:///./src/app/components/journey/step5/skip-modal/skip-modal.component.js","webpack:///./src/app/components/journey/step5/step5.component.html","webpack:///./src/app/components/journey/step5/step5.component.js","webpack:///./src/app/components/journey/step5/step5.service.js"],"names":["webpackJsonp","./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.html","module","exports","./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.js","__webpack_require__","angular","modalComp","component","template","bindings","resolve","close","dismiss","name","./src/app/components/journey/step5/skip-modal/skip-modal.component.html","./src/app/components/journey/step5/skip-modal/skip-modal.component.js","modalController","$scope","vm","this","$onInit","Close","isSelected","$value","cancel","controller","./src/app/components/journey/step5/step5.component.html","./src/app/components/journey/step5/step5.component.js","step5Controller","$rootScope","$state","$anchorScroll","step5Service","$uibModal","analyticService","$timeout","journeyService","UtilService","appState","showSelectedCard","showARN","stepsHeader","currentStep","perfiosUrl","env","PERFIOS_URL","isStaffJourney","selectedCard","getSelectedCard","contactData","getContactDetails","cardTypeAE","cardType","employmentStatus","appCriteriaOpt","model","checkPerfios","getErrorMessages","then","data","errorMessages","step5","pageList","employmentDetails","internal_reference_id","getDataFromStorageContact","adobeId","trackPageLoad","getUserDetails","key","console","log","skip","isValid","open","result","hasSkippedPerfios","perfiosCheck","securityParams","robocheck","sendEmploymentDetails","success","go","cardKey","errorCode","submitted","buttonList","buttonClick","event_content","trackUserAction","goback","next","step5Form","goHPR","focusOnInvalid","$valid","showTrbData","applicationCriteria","appCriteria","courseStartDate","document","getElementById","value","courseEndDate","errMsg","message","getDataFromBackend","showTrbMessage","reqData","appCriteriaFrontend","getTRBDataFromIbps","trbBalanceValue","trbBalanceAmount","limitAssignedValue","limitAssigned","trbApiResponseMsg","responseMessage","continue","saveAndNavToPerfios","getPerfiosReport","response","backdrop","size","setDisableBrowserClose","formPayload","payload","formSignature","signature","forms","submit","step5Comp","./src/app/components/journey/step5/step5.component.scss","./src/app/components/journey/step5/step5.service.js","service","$http","$q","CONFIG","self","setDataInStorage","appData","primaryApplicant","mergeApplicationData","getApplicantInfo","prop","localState","getApplicationData","skippedPerfios","apiURL","httpMethod","integrationsActive","apiUrl","Math","random","method","url","headers","Content-Type","JSON","stringify","params","status","setEmployerName","employerName","savedEmpStatus","validationErrors","userDTO","selectedEmploymentStatus","perfiosData","dob","email","getPerfiosStatus","deferred","defer","perfiosTxnId","getPerfiosIncomeData","panStatusFlag","persistIncomeData","panStatus","reject","promise","applicantData","companyName","perfiosCompanyName","annualIncome","grossAnnualIncome","isUnhapppyJourney","perfiosTransactionId","def"],"mappings":"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","file":"resources/js/1bd7aa6edc9e513029404.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ \"./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.html\":\n/* unknown exports provided */\n/* all exports used */\n/*!*********************************************************************************************!*\\\n  !*** ./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.html ***!\n  \\*********************************************************************************************/\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=modal-header> </div> <div class=modal-body> <p class=no-margin-b> You are now being re-directed to a third party website of Perfios Software Solutions Private Limited. You will access this site solely for the purpose of accessing your income details for the purpose of the Credit Card application processing. </p> </div> <div class=modal-footer> </div>\";\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*******************************************************************************************!*\\\n  !*** ./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.js ***!\n  \\*******************************************************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n(function () {\r\n    'use strict';\r\n    var angular = __webpack_require__(/*! angular */ \"./node_modules/angular/index.js\");\r\n\r\n    var modalComp = angular.module('journey.module').component('perfiosLoader', {\r\n        template: __webpack_require__(/*! ./perfios-loader-modal.component.html */ \"./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.html\"),\r\n        bindings: {\r\n            resolve: '<',\r\n            close: '&',\r\n            dismiss: '&'\r\n        }\r\n    });\r\n    module.exports = modalComp.name;\r\n})();\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step5/skip-modal/skip-modal.component.html\":\n/* unknown exports provided */\n/* all exports used */\n/*!*******************************************************************************!*\\\n  !*** ./src/app/components/journey/step5/skip-modal/skip-modal.component.html ***!\n  \\*******************************************************************************/\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=modal-header> <div class=heading-container> <h4 class=brand-bar></h4> </div> <div class=close-button-container> <span aria-label=Close title=Close class=\\\"icon icon-2x icon-delete-small\\\" ng-click=$ctrl.cancel()></span> </div> </div> <div class=modal-body> <p> Statement access through Internet Banking saves you the effort of providing your bank statement/Form 26AS. </p> <p class=no-margin-b> Do you still want to skip this step? </p> </div> <div class=modal-footer> <div class=buttons-container> <button class=button-outline ng-click=$ctrl.Close(false)>No</button> <button class=button-primary ng-click=$ctrl.Close(true)>Yes</button> </div> </div>\";\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step5/skip-modal/skip-modal.component.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*****************************************************************************!*\\\n  !*** ./src/app/components/journey/step5/skip-modal/skip-modal.component.js ***!\n  \\*****************************************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n(function () {\r\n    'use strict';\r\n    var angular = __webpack_require__(/*! angular */ \"./node_modules/angular/index.js\");\r\n\r\n    var modalController = function ($scope) {\r\n        var vm = this;\r\n\r\n        vm.$onInit = function () {\r\n\r\n        };\r\n\r\n        /**\r\n         * This function is triggered when we select or unselect card.\r\n         * We push the selected card in selectedPrimaryCards array and\r\n         *  pop the unselected card.\r\n         */\r\n        vm.Close = function (isSelected) {\r\n            vm.close({\r\n                $value: isSelected\r\n            });\r\n        };\r\n\r\n        vm.cancel = function () {\r\n            vm.dismiss({\r\n                $value: 'cancel'\r\n            });\r\n        };\r\n    };\r\n\r\n    var modalComp = angular.module('journey.module').component('skipModal', {\r\n        template: __webpack_require__(/*! ./skip-modal.component.html */ \"./src/app/components/journey/step5/skip-modal/skip-modal.component.html\"),\r\n        bindings: {\r\n            resolve: '<',\r\n            close: '&',\r\n            dismiss: '&'\r\n        },\r\n        controller: ['$scope', modalController]\r\n    });\r\n    module.exports = modalComp.name;\r\n})();\r\n\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step5/step5.component.html\":\n/* unknown exports provided */\n/* all exports used */\n/*!***************************************************************!*\\\n  !*** ./src/app/components/journey/step5/step5.component.html ***!\n  \\***************************************************************/\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=row> <form id=step5 name=step5Form autocomplete=off novalidate> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\" ui-view=step5View> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <alert-msg ng-if=$ctrl.errMsg type=ERROR> {{$ctrl.errMsg}} </alert-msg> <alert-msg ng-if=$ctrl.showTrbMessage type=SUCCESS close=$ctrl.closeSuccessMsg()> {{$ctrl.trbApiResponseMsg}} </alert-msg> <h1 class=\\\"brand-bar no-margin-top\\\">Employment details</h1> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer-xs\\\"> <label id=empStatusLbl for=employmentStatus>Employment status</label> <div ng-class=\\\"{'has-error': step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}\\\"> <custom-select ng-if=\\\"$ctrl.selectedCard.key !='HPR' && $ctrl.selectedCard.key !='SVC'\\\"> <select id=employmentStatus name=employmentStatus class=form-control ng-model=$ctrl.model.employmentStatus ng-options=\\\"item for item in $ctrl.employmentStatus\\\" aria-describedby=empStatusErrMsg aria-invalid=\\\"{{step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}}\\\" ng-disabled=\\\"$ctrl.cardTypeAE != 'Supplementary Card'\\\" required> <option value=\\\"\\\" disabled=disabled>Please select</option> <option value=$ctrl.model.employmentStatus[0]></option> </select> </custom-select> <custom-select ng-if=\\\"$ctrl.selectedCard.key=='HPR' || $ctrl.selectedCard.key=='SVC'\\\"> <select id=employmentStatus name=employmentStatus class=form-control ng-model=$ctrl.model.employmentStatus ng-options=\\\"item for item in $ctrl.employmentStatus\\\" aria-describedby=empStatusErrMsg aria-invalid=\\\"{{step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}}\\\" ng-disabled=\\\"\\\" required> <option value=\\\"\\\" disabled=disabled>Please select</option> <option value=$ctrl.model.employmentStatus[0]></option> </select> </custom-select> </div> <div id=empStatusErrMsg ng-class=\\\"{'has-error': step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}\\\"> <validation-msg ng-if=\\\"step5Form.employmentStatus.$error.required && (step5Form.employmentStatus.$touched || $ctrl.submitted)\\\"> {{$ctrl.errorMessages.enterEmploymentStatus}} </validation-msg> </div> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\" ng-if=\\\"$ctrl.selectedCard.key=='HPR'\\\"> <div class=\\\"form-group line-spacer-xs\\\"> <label for=appCriteria>Application Criteria</label> <div ng-class=\\\"{'has-error': step5Form.appCriteria.$invalid && (step5Form.appCriteria.$touched || $ctrl.submitted)}\\\"> <custom-select> <select id=appCriteria name=appCriteria class=form-control ng-model=$ctrl.model.appCriteria ng-options=\\\"item for item in $ctrl.appCriteriaOpt\\\" aria-describedby=appCriteriaErrMsg ng-change=$ctrl.getDataFromBackend() aria-invalid=\\\"{{step5Form.appCriteria.$invalid && (step5Form.appCriteria.$touched || $ctrl.submitted)}}\\\" required> <option value=\\\"\\\">Please select</option> </select> </custom-select> </div> <div id=appCriteriaErrMsg ng-class=\\\"{'has-error': step5Form.appCriteria.$invalid}\\\"> <validation-msg ng-if=\\\"step5Form.appCriteria.$error.required && (step5Form.appCriteria.$touched || $ctrl.submitted)\\\"> Please select your application criteria using the drop-down menu to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row ng-if=\\\"$ctrl.model.employmentStatus == 'Student' && $ctrl.selectedCard.key=='HPR'\\\"> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=startDate>Course Start Date</label> <div ng-class=\\\"{'has-error': step5Form.startDate.$invalid && ($ctrl.submitted || step5Form.startDate.$touched)}\\\"> <input type=date id=startDate name=startDate ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.startDate aria-describedby=startDateErrMsg aria-invalid=\\\"{{step5Form.startDate.$invalid && (step5Form.startDate.$touched || $ctrl.submitted)}}\\\" required> </div> </div> <div id=startDateErrMsg ng-class=\\\"{'has-error': step5Form.startDate.$invalid}\\\"> <validation-msg ng-if=\\\"step5Form.startDate.$error.required && (step5Form.startDate.$touched || $ctrl.submitted)\\\"> Please enter your Course Start Date using the calendar icon to continue with your application. </validation-msg> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=endDate>Course End Date</label> <div ng-class=\\\"{'has-error': step5Form.endDate.$invalid && ($ctrl.submitted || step5Form.endDate.$touched)}\\\"> <input type=date id=endDate name=endDate ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.endDate aria-describedby=endDateErrMsg aria-invalid=\\\"{{step5Form.endDate.$invalid && (step5Form.endDate.$touched || $ctrl.submitted)}}\\\" required> </div> </div> <div id=endDateErrMsg ng-class=\\\"{'has-error': step5Form.endDate.$invalid}\\\"> <validation-msg ng-if=\\\"step5Form.endDate.$error.required && (step5Form.endDate.$touched || $ctrl.submitted)\\\"> Please enter your Course End Date using the calendar icon to continue with your application. </validation-msg> </div> </div> </div> <div class=row ng-if=\\\"$ctrl.model.appCriteria === 'TRB' &&  $ctrl.showTrbData\\\"> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=trbBalanceValue>Total Assets (TRB)</label> <div ng-class=\\\"{'has-error': step5Form.trbBalanceValue.$invalid && ($ctrl.submitted || step5Form.trbBalanceValue.$touched)}\\\"> <input type=tel id=trbBalanceValue name=trbBalanceValue ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.trbBalanceValue ng-disabled=true> </div> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=limitAssignedValue>Total HSBC Exposure (Limit Assigned)</label> <div ng-class=\\\"{'has-error': step5Form.limitAssignedValue.$invalid && ($ctrl.submitted || step5Form.limitAssignedValue.$touched)}\\\"> <input type=tel id=limitAssignedValue name=limitAssignedValue ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.limitAssignedValue ng-disabled=true> </div> </div> </div> </div> </div> <step-footer show-back=true back-callback=$ctrl.goback() show-proceed=false show-continue=\\\"$ctrl.isStaffJourney || !$ctrl.isStaffJourney\\\" continue-callback=$ctrl.next(step5Form) proceed-callback=$ctrl.next(step5Form.$valid) skip-callback=$ctrl.skip(step5Form.$valid) skip-overlay=true> </step-footer> </form> </div> <form ng-form-commit ng-show=false name=autoform method=post action=\\\"{{$ctrl.perfiosUrl | trustedUrl}}\\\"> <input ng-model=$ctrl.formPayload name=payload> <input ng-model=$ctrl.formSignature name=signature> <button type=button ng-click=save(autoform)>buy</button> </form>\";\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step5/step5.component.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*************************************************************!*\\\n  !*** ./src/app/components/journey/step5/step5.component.js ***!\n  \\*************************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n(function () {\r\n    'use strict';\r\n    var angular = __webpack_require__(/*! angular */ \"./node_modules/angular/index.js\");\r\n    var env = __webpack_require__(/*! config */ \"./src/resources/config/env.prod.json\");\r\n    __webpack_require__(/*! ./step5.service */ \"./src/app/components/journey/step5/step5.service.js\");\r\n    __webpack_require__(/*! ./step5.component.scss */ \"./src/app/components/journey/step5/step5.component.scss\");\r\n    __webpack_require__(/*! ./skip-modal/skip-modal.component */ \"./src/app/components/journey/step5/skip-modal/skip-modal.component.js\");\r\n    __webpack_require__(/*! ./perfios-loader/perfios-loader-modal.component */ \"./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.js\");\r\n\r\n    function step5Controller($rootScope, $state, $anchorScroll, step5Service, $uibModal, analyticService, $timeout, journeyService, UtilService, appState) {\r\n        var vm = this;\r\n        vm.$onInit = function () {\r\n            $rootScope.showSelectedCard = true;\r\n            $rootScope.showARN = false;\r\n            $rootScope.stepsHeader.currentStep = 2;\r\n            vm.perfiosUrl = env.PERFIOS_URL;\r\n            vm.isStaffJourney = journeyService.isStaffJourney();\r\n            vm.selectedCard = journeyService.getSelectedCard();\r\n            // console.log(\"selected card==\", vm.selectedCard);\r\n            var contactData = appState.getContactDetails();\r\n            if (!vm.isStaffJourney) {\r\n                vm.cardTypeAE = \"Primary Card\";\r\n            } else {\r\n                vm.cardTypeAE = contactData.cardType;\r\n            }\r\n            // if(vm.selectedCard.key != 'HPR'){\r\n                vm.employmentStatus = ['Employed (salaried)', 'Housewife', 'Retired', 'Student', 'Self-Employed', 'Unemployed'];\r\n                //  }\r\n            // vm.appCriteriaOpt = ['TRB','Other'];//commented @28.06.24\r\n            vm.appCriteriaOpt = ['TRB'];\r\n\r\n\r\n            vm.model = {};\r\n            // vm.model = step5Service.getUserDetails();\r\n            // if (vm.model.perfiosCheck && vm.model.navToThirdPartyUrl) {\r\n            //     checkPerfios();\r\n            //     // Mark that Perfios status check is done.\r\n            //     step5Service.setDataInStorage({ \"navToThirdPartyUrl\": false });\r\n            // }\r\n            checkPerfios();\r\n            journeyService.getErrorMessages().then(function (data) {\r\n                vm.errorMessages = data.step5;\r\n            });\r\n            vm.isStaffJourney = journeyService.isStaffJourney();\r\n            analyticService.pageList.employmentDetails.internal_reference_id = journeyService.getDataFromStorageContact().adobeId;\r\n            analyticService.trackPageLoad(analyticService.pageList.employmentDetails);\r\n            $anchorScroll();\r\n        };\r\n\r\n        var checkPerfios = function () {\r\n            // step5Service.getPerfiosStatus().then(function (result) {//commented to stop perfios call\r\n\r\n            vm.model = step5Service.getUserDetails();\r\n            vm.model.employmentStatus = vm.employmentStatus[0];\r\n            if(vm.selectedCard.key == 'SVC'){\r\n                    vm.employmentStatus  = ['Employed (salaried)', 'Self-Employed'];\r\n                }\r\n            console.log(\"Selected value from frontend common ======== \" + vm.employmentStatus);\r\n\r\n            // if(!vm.isStaffJourney) {// was already commented\r\n            //     vm.model.employmentStatus = vm.employmentStatus[0];\r\n            //     console.log(\"Selected value from frontend 1 ======== \" + vm.employmentStatus);\r\n            // }\r\n            //  else if (vm.isStaffJourney && vm.cardTypeAE == 'Primary Card') {\r\n            //     vm.model.employmentStatus = vm.employmentStatus[0];\r\n            //     console.log(\"Selected value from frontend 2 ======== \" + vm.employmentStatus);\r\n            // } else {\r\n            //     vm.model.employmentStatus = vm.employmentStatus;\r\n            //     console.log(\"Selected value from frontend 3 ======== \" + vm.employmentStatus);\r\n            // };\r\n\r\n\r\n\r\n\r\n            // if (result.status === 'OK') {//commented to stop perfios call\r\n            //     step5Service.setDataInStorage({ \"navToThirdPartyUrl\": false });\r\n            //     if (result.panStatus) {\r\n            //         $state.go('app.journey.s6-incomeDetails',{'cardKey':vm.selectedCard.key});\r\n            //     } else {\r\n            //         analyticService.buttonList.error.event_content = \"PAN mismatch error\";\r\n            //         analyticService.trackUserAction(analyticService.buttonList.error);\r\n            //         $state.go('app.pan-mismatch',{'cardKey':vm.selectedCard.key});\r\n            //     }\r\n            // }\r\n            // });//commented to stop perfios call\r\n        };\r\n\r\n        vm.skip = function (isValid) {\r\n            var modalInstance = $uibModal.open({\r\n                component: \"skipModal\"\r\n            });\r\n            modalInstance.result.then(function (isSelected) {\r\n                if (isSelected) {\r\n                    if (isValid) {\r\n                        var data = {\r\n                            \"employmentStatus\": vm.model.employmentStatus,\r\n                            \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n                        };\r\n                        // console.log(\"Data while skiping the page ======= \" + JSON.stringify(data));\r\n                        var securityParams = {\r\n                            robocheck: vm.robocheck ? vm.robocheck : ''\r\n                        };\r\n                        step5Service.sendEmploymentDetails(data, securityParams, 'Y').then(function (result) {\r\n                            if (result.success) {\r\n                                $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n                            } else if (result.errorCode === 10006) {\r\n                                //arun else if condition\r\n                                //vm.errMsg = \"Sorry! there seems to be some technical error. Please try again\";\r\n                                $state.go('app.journey.s1-cards');\r\n                            }\r\n                        });\r\n                    } else {\r\n                        vm.submitted = true;\r\n                    }\r\n                }\r\n            }, function () { });\r\n            analyticService.buttonList.buttonClick.event_content = \"skip and upload income documents\";\r\n            analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n        };\r\n\r\n        vm.goback = function () {\r\n            // var data = {\r\n            //     \"employmentStatus\": vm.model.selectedEmploymentStatus,\r\n            //     \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n            // };\r\n            // step5Service.setDataInStorage(data);\r\n            // $state.go('app.journey.s4-personalDemographic');\r\n            $state.go('app.journey.s3-personalDetails', { 'cardKey': vm.selectedCard.key });\r\n            analyticService.buttonList.buttonClick.event_content = \"back\";\r\n            analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n        };\r\n\r\n        vm.next = function (step5Form) {\r\n            // console.log(\"for valid ======= \" + step5Form);\r\n            if (vm.selectedCard.key == 'HPR') {\r\n                // console.log(\"hpr 1======= \", vm.selectedCard.key);\r\n                goHPR(step5Form);\r\n            } else {\r\n                // console.log(\"other======= \", vm.selectedCard.key);\r\n                if (vm.model.employmentStatus !== null) {\r\n                    var data = {\r\n                        \"employmentStatus\": vm.model.employmentStatus,\r\n                        \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n                    };\r\n                    // console.log(\"Data when sending to next page ======= \" + JSON.stringify(data));\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    step5Service.sendEmploymentDetails(data, securityParams, data.hasSkippedPerfios).then(function (result) {\r\n                        if (result.success) {\r\n                            $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n                        }\r\n                        else if (result.errorCode === 10006) {\r\n                            $state.go('app.journey.s1-cards');\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"proceed\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    vm.submitted = true;\r\n                    UtilService.focusOnInvalid(\"step5Form\");\r\n                }\r\n            }\r\n        };\r\n        var goHPR = function (step5Form) {\r\n            // console.log(\"go HPR\");\r\n            if (step5Form.$valid) {\r\n                // console.log(\" valid\")\r\n                if (!vm.showTrbData) {\r\n                    console.log(\" trb is empty\")\r\n                    return;\r\n                }\r\n                var data = {\r\n                    \"employmentStatus\": vm.model.employmentStatus,\r\n                    \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y',\r\n                    \"applicationCriteria\": vm.model.appCriteria,\r\n                    \"courseStartDate\": document.getElementById(\"startDate\") == null ? null : document.getElementById(\"startDate\").value,\r\n                    \"courseEndDate\": document.getElementById(\"endDate\") == null ? null : document.getElementById(\"endDate\").value,\r\n                };\r\n                // console.log(\"Data when sending to next page HPR======= \" + JSON.stringify(data));\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                step5Service.sendEmploymentDetails(data, securityParams, data.hasSkippedPerfios).then(function (result) {\r\n                    if (result.success) {\r\n                        $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n                    }\r\n                    else if (result.errorCode === 10006) {\r\n                        //arun else if condition\r\n                        //vm.errMsg = \"Sorry! there seems to be some technical error. Please try again\";\r\n                        $state.go('app.journey.s1-cards');\r\n                    } else if (result.errorCode) {\r\n                        vm.errMsg = result.message;\r\n                    }\r\n                });\r\n                analyticService.buttonList.buttonClick.event_content = \"proceed\";\r\n                analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n            } else {\r\n                // console.log(\"not valid\")\r\n                UtilService.focusOnInvalid('step5Form');\r\n            }\r\n        }\r\n        vm.getDataFromBackend = function () {\r\n            vm.errMsg = \"\";\r\n            vm.showTrbMessage = \"\";\r\n            // console.log(\"selected Appcriteria==\", vm.model.appCriteria)\r\n            if (vm.model.appCriteria == 'TRB' && vm.selectedCard.key == 'HPR') {\r\n                console.log(\"Hi for trb for \" + vm.model.appCriteria);\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                var reqData = {\r\n                    appCriteriaFrontend: vm.model.appCriteria\r\n                }\r\n                // console.log(\"data==\", JSON.stringify(reqData));\r\n                step5Service.getTRBDataFromIbps(reqData, securityParams).then(function (result) {\r\n                    // console.log(\"backend channel all data==\", JSON.stringify(result));\r\n                    if (result.success) {\r\n                        vm.showTrbData = true;\r\n                        vm.model.trbBalanceValue = result.trbBalanceAmount;\r\n                        vm.model.limitAssignedValue = result.limitAssigned;\r\n                        vm.showTrbMessage = true;\r\n                        vm.trbApiResponseMsg = result.responseMessage;\r\n                    } else {\r\n                        vm.showTrbData = false;\r\n                        vm.errMsg = result.responseMessage;\r\n                    }\r\n                });\r\n            } else {\r\n                console.log(\"No for trb for \" + vm.model.appCriteria);\r\n            }\r\n        }\r\n\r\n        vm.continue = function (isValid) {\r\n            if (isValid) {\r\n                $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n            } else {\r\n                vm.submitted = true;\r\n            }\r\n        };\r\n\r\n        vm.saveAndNavToPerfios = function (isValid) {\r\n            if (isValid) {\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                step5Service.getPerfiosReport(securityParams).then(function (response) {\r\n                    if (response) {\r\n                        var data = {\r\n                            \"employmentStatus\": vm.model.employmentStatus,\r\n                            // \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n                            \"hasSkippedPerfios\": 'Y'\r\n                        };\r\n                        // console.log(\"Data while saving and navigating to perfios ======= \" + JSON.stringify(data));\r\n                        step5Service.sendEmploymentDetails(data, securityParams, 'N').then(function (result) {\r\n                            if (result.success) {\r\n                                var perfiosLoader = $uibModal.open({\r\n                                    component: \"perfiosLoader\",\r\n                                    backdrop: \"static\",\r\n                                    size: \"md\"\r\n                                });\r\n                                journeyService.setDisableBrowserClose(true);\r\n                                vm.model.perfiosCheck = true;\r\n\r\n                                vm.formPayload = response.payload;\r\n                                vm.formSignature = response.signature;\r\n                                $timeout(function () {\r\n                                    document.forms['autoform'].submit();\r\n                                }, 2000);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n                analyticService.buttonList.buttonClick.event_content = \"continue\";\r\n                analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n            } else {\r\n                vm.submitted = true;\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    var step5Comp = angular.module('journey.module').component('step5', {\r\n        template: __webpack_require__(/*! ./step5.component.html */ \"./src/app/components/journey/step5/step5.component.html\"),\r\n        controller: ['$rootScope', '$state', '$anchorScroll', 'step5Service', '$uibModal', 'analyticService', '$timeout', 'journeyService', 'UtilService', 'appState', step5Controller]\r\n    });\r\n    module.exports = step5Comp.name;\r\n})();\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step5/step5.component.scss\":\n/* unknown exports provided */\n/* all exports used */\n/*!***************************************************************!*\\\n  !*** ./src/app/components/journey/step5/step5.component.scss ***!\n  \\***************************************************************/\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step5/step5.service.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!***********************************************************!*\\\n  !*** ./src/app/components/journey/step5/step5.service.js ***!\n  \\***********************************************************/\n/***/ (function(module, exports) {\n\n(function () {\r\n    'use strict';\r\n    // var jsonpatch = require('fast-json-patch');\r\n\r\n    var step5Service = angular.module('journey.module').service('step5Service', ['$rootScope', '$http', '$q', 'appState', 'CONFIG', function ($rootScope, $http, $q, appState, CONFIG) {\r\n        var self = this;\r\n\r\n        self.setDataInStorage = function (data) {\r\n            var appData = {\r\n                \"primaryApplicant\": data\r\n            };\r\n            appState.mergeApplicationData(appData);\r\n        };\r\n\r\n        var getApplicantInfo = function (prop) {\r\n            var localState = appState.getApplicationData();\r\n            if (localState.primaryApplicant && localState.primaryApplicant[prop]) {\r\n                return localState.primaryApplicant[prop];\r\n            } else {\r\n                return null;\r\n            }\r\n        };\r\n\r\n        self.sendEmploymentDetails = function (data, securityParams, skippedPerfios) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/applicantdetails/employmentdetails/perfios/save/' + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step5_employment-details/employment_details_perfios_save.json';\r\n            }\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(data),\r\n                params: securityParams\r\n            }).then(function (response) {\r\n                if (response.status === 200 && response.data) {\r\n                    appState.setEmployerName(response.data.employerName);\r\n                    //INM-1767: Clear employment details if user has changed employment status or changed Perfios status\r\n                    var savedEmpStatus = getApplicantInfo(\"employmentStatus\");\r\n                    var hasSkippedPerfios = getApplicantInfo(\"hasSkippedPerfios\");\r\n                    if ((savedEmpStatus !== data.employmentStatus) || (hasSkippedPerfios !== skippedPerfios)) {\r\n                        self.setDataInStorage({\r\n                            \"employmentDetails\": null\r\n                        });\r\n                    }\r\n                    self.setDataInStorage(data);\r\n                    return response.data;\r\n                } else if (response && response.validationErrors) {\r\n                    //return pageError = \"Please ensure the values added in form fields are appropriate, and retry.\";\r\n                } else {\r\n                    //Need to display \"response\" below page heading (above form).\r\n                    //vm.pageError = \"Some error occurred on the server side. Please try after some time.\";\r\n                }\r\n                return;\r\n            }, function (response) {\r\n                return;\r\n            });\r\n        };\r\n\r\n        self.getUserDetails = function () {\r\n            var userDTO = {},\r\n                localState = appState.getApplicationData();\r\n            if (localState) {\r\n                if (localState.primaryApplicant) {\r\n                    userDTO.selectedEmploymentStatus = localState.primaryApplicant.employmentStatus ? localState.primaryApplicant.employmentStatus : null;\r\n                    userDTO.perfiosCheck = localState.primaryApplicant.hasSkippedPerfios ? localState.primaryApplicant.hasSkippedPerfios : 'Y';\r\n                    userDTO.perfiosCheck = userDTO.perfiosCheck === 'Y' ? false : true;\r\n                    // userDTO.hasDonePerfios = localState.primaryApplicant.hasDonePerfios;\r\n                }\r\n            }\r\n            return userDTO;\r\n        };\r\n\r\n        self.getPerfiosReport = function (securityParams) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/perfiosAPI/generatePerfiosReport/' + getApplicantInfo('arn');\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step5_employment-details/perfios_report.json';\r\n            }\r\n            var perfiosData = {\r\n                \"dob\": getApplicantInfo('dateOfBirth'),\r\n                \"email\": getApplicantInfo('email')\r\n            };\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(perfiosData),\r\n                params: securityParams\r\n            }).then(function (response) {\r\n                return response.data;\r\n            });\r\n        };\r\n\r\n        self.getPerfiosStatus = function () {\r\n            var apiURL,\r\n                deferred = $q.defer();\r\n            if ($rootScope.integrationsActive) {\r\n                apiURL = CONFIG.apiUrl + '/perfiosAPI/statusCheckTxn/' + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n            } else {\r\n                apiURL = 'resources/data/mock/step5_employment-details/perfios_status.json';\r\n            }\r\n            $http({\r\n                method: 'GET',\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(function (response) {\r\n                var data = {\r\n                    \"status\": 'OK'\r\n                };\r\n                if (response && response.status === 200 && response.data && response.data.success) {\r\n                    self.setDataInStorage({ \"hasSkippedPerfios\": \"N\" });\r\n                    if (response.data.errorCode === 8001) {\r\n                        // Perfios Transaction Deleted\r\n                        data.status = 'DELETED';\r\n                        deferred.resolve(data);\r\n                    } else {\r\n                        var perfiosTxnId = response.data.message;\r\n                        getPerfiosIncomeData(perfiosTxnId).then(function (result) {\r\n                            if (result.panStatusFlag !== 'PAN_MISMATCH') {\r\n                                persistIncomeData(result);\r\n                                data.panStatus = true;\r\n                                deferred.resolve(data);\r\n                            } else {\r\n                                data.panStatus = false;\r\n                                deferred.resolve(data);\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    self.setDataInStorage({\r\n                        \"hasSkippedPerfios\": \"Y\"\r\n                    });\r\n                    data.status = 'FAILURE';\r\n                    deferred.resolve(data);\r\n                }\r\n            }, function (response) {\r\n                deferred.reject(\"Some error occured!\");\r\n            });\r\n            return deferred.promise;\r\n        };\r\n\r\n        var persistIncomeData = function (data) {\r\n            var applicantData = {\r\n                \"panStatusFlag\": data.panStatusFlag,\r\n                \"employmentDetails\": {\r\n                    // \"accountNumber\": data.accountNumber,\r\n                    // \"primaryBank\": data.primaryBankName,\r\n                    \"companyName\": data.companyName,\r\n                    \"perfiosCompanyName\": data.companyName,\r\n                    \"annualIncome\": data.grossAnnualIncome,\r\n                    \"isUnhapppyJourney\": data.isUnhapppyJourney\r\n                }\r\n            };\r\n            self.setDataInStorage(applicantData);\r\n        };\r\n\r\n        var getPerfiosIncomeData = function (perfiosTransactionId) {\r\n            var apiURL, httpMethod, def = $q.defer();\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/applicantdetails/getincomedetails/' + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step5_employment-details/perfios_income_data.json';\r\n            }\r\n            $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(function (response) {\r\n                if (response && response.status === 200 && response.data) {\r\n                   // deletePerfiosTransaction(perfiosTransactionId); commented by rashmi 20200302\r\n                    def.resolve(response.data);\r\n                } else {\r\n                    def.resolve({ panStatusFlag: 'FAILED' });\r\n                }\r\n            });\r\n            return def.promise;\r\n        };\r\n\r\n        var deletePerfiosTransaction = function (perfiosTransactionId) {\r\n            if (!$rootScope.integrationsActive) {\r\n                return;\r\n            }\r\n            $http({\r\n                method: 'POST',\r\n                url: CONFIG.apiUrl + '/perfiosAPI/deleteTransaction',\r\n                data: perfiosTransactionId\r\n            });\r\n        };\r\n        self.getTRBDataFromIbps = function (reqData, securityParams) {\r\n            //  console.log(\"ReqData at service==\",JSON.stringify(reqData));\r\n            //  console.log(\"arn===\",getApplicantInfo('arn'));\r\n             var apiURL, httpMethod;\r\n             if ($rootScope.integrationsActive) {\r\n                 httpMethod = \"POST\";\r\n                 apiURL = CONFIG.apiUrl + '/applicantdetails/employmentdetails/getTrbData/'  + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n             } else {\r\n                 httpMethod = \"GET\";\r\n                 apiURL = 'resources/data/mock/step5_employment-details/getTrbDataFromIbps.json';\r\n                }\r\n             return $http({\r\n                 method: httpMethod,\r\n                 url: apiURL,\r\n                 headers: {\r\n                     'Content-Type': 'application/json'\r\n                 },\r\n                 data: reqData,\r\n                 params: securityParams\r\n             }).then(function (response) {\r\n                 if (response && response.status === 200 && response.data) {\r\n                     return response.data;\r\n                 }\r\n             });\r\n         };\r\n    }]);\r\n\r\n    module.exports = step5Service.name;\r\n})();\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// resources/js/1bd7aa6edc9e513029404.js","module.exports = \"<div class=modal-header> </div> <div class=modal-body> <p class=no-margin-b> You are now being re-directed to a third party website of Perfios Software Solutions Private Limited. You will access this site solely for the purpose of accessing your income details for the purpose of the Credit Card application processing. </p> </div> <div class=modal-footer> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.html\n// module id = ./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.html\n// module chunks = 4","(function () {\r\n    'use strict';\r\n    var angular = require('angular');\r\n\r\n    var modalComp = angular.module('journey.module').component('perfiosLoader', {\r\n        template: require('./perfios-loader-modal.component.html'),\r\n        bindings: {\r\n            resolve: '<',\r\n            close: '&',\r\n            dismiss: '&'\r\n        }\r\n    });\r\n    module.exports = modalComp.name;\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.js\n// module id = ./src/app/components/journey/step5/perfios-loader/perfios-loader-modal.component.js\n// module chunks = 4","module.exports = \"<div class=modal-header> <div class=heading-container> <h4 class=brand-bar></h4> </div> <div class=close-button-container> <span aria-label=Close title=Close class=\\\"icon icon-2x icon-delete-small\\\" ng-click=$ctrl.cancel()></span> </div> </div> <div class=modal-body> <p> Statement access through Internet Banking saves you the effort of providing your bank statement/Form 26AS. </p> <p class=no-margin-b> Do you still want to skip this step? </p> </div> <div class=modal-footer> <div class=buttons-container> <button class=button-outline ng-click=$ctrl.Close(false)>No</button> <button class=button-primary ng-click=$ctrl.Close(true)>Yes</button> </div> </div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step5/skip-modal/skip-modal.component.html\n// module id = ./src/app/components/journey/step5/skip-modal/skip-modal.component.html\n// module chunks = 4","(function () {\r\n    'use strict';\r\n    var angular = require('angular');\r\n\r\n    var modalController = function ($scope) {\r\n        var vm = this;\r\n\r\n        vm.$onInit = function () {\r\n\r\n        };\r\n\r\n        /**\r\n         * This function is triggered when we select or unselect card.\r\n         * We push the selected card in selectedPrimaryCards array and\r\n         *  pop the unselected card.\r\n         */\r\n        vm.Close = function (isSelected) {\r\n            vm.close({\r\n                $value: isSelected\r\n            });\r\n        };\r\n\r\n        vm.cancel = function () {\r\n            vm.dismiss({\r\n                $value: 'cancel'\r\n            });\r\n        };\r\n    };\r\n\r\n    var modalComp = angular.module('journey.module').component('skipModal', {\r\n        template: require('./skip-modal.component.html'),\r\n        bindings: {\r\n            resolve: '<',\r\n            close: '&',\r\n            dismiss: '&'\r\n        },\r\n        controller: ['$scope', modalController]\r\n    });\r\n    module.exports = modalComp.name;\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step5/skip-modal/skip-modal.component.js\n// module id = ./src/app/components/journey/step5/skip-modal/skip-modal.component.js\n// module chunks = 4","module.exports = \"<div class=row> <form id=step5 name=step5Form autocomplete=off novalidate> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\" ui-view=step5View> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <alert-msg ng-if=$ctrl.errMsg type=ERROR> {{$ctrl.errMsg}} </alert-msg> <alert-msg ng-if=$ctrl.showTrbMessage type=SUCCESS close=$ctrl.closeSuccessMsg()> {{$ctrl.trbApiResponseMsg}} </alert-msg> <h1 class=\\\"brand-bar no-margin-top\\\">Employment details</h1> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer-xs\\\"> <label id=empStatusLbl for=employmentStatus>Employment status</label> <div ng-class=\\\"{'has-error': step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}\\\"> <custom-select ng-if=\\\"$ctrl.selectedCard.key !='HPR' && $ctrl.selectedCard.key !='SVC'\\\"> <select id=employmentStatus name=employmentStatus class=form-control ng-model=$ctrl.model.employmentStatus ng-options=\\\"item for item in $ctrl.employmentStatus\\\" aria-describedby=empStatusErrMsg aria-invalid=\\\"{{step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}}\\\" ng-disabled=\\\"$ctrl.cardTypeAE != 'Supplementary Card'\\\" required> <option value=\\\"\\\" disabled=disabled>Please select</option> <option value=$ctrl.model.employmentStatus[0]></option> </select> </custom-select> <custom-select ng-if=\\\"$ctrl.selectedCard.key=='HPR' || $ctrl.selectedCard.key=='SVC'\\\"> <select id=employmentStatus name=employmentStatus class=form-control ng-model=$ctrl.model.employmentStatus ng-options=\\\"item for item in $ctrl.employmentStatus\\\" aria-describedby=empStatusErrMsg aria-invalid=\\\"{{step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}}\\\" ng-disabled=\\\"\\\" required> <option value=\\\"\\\" disabled=disabled>Please select</option> <option value=$ctrl.model.employmentStatus[0]></option> </select> </custom-select> </div> <div id=empStatusErrMsg ng-class=\\\"{'has-error': step5Form.employmentStatus.$invalid && (step5Form.employmentStatus.$touched || $ctrl.submitted)}\\\"> <validation-msg ng-if=\\\"step5Form.employmentStatus.$error.required && (step5Form.employmentStatus.$touched || $ctrl.submitted)\\\"> {{$ctrl.errorMessages.enterEmploymentStatus}} </validation-msg> </div> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\" ng-if=\\\"$ctrl.selectedCard.key=='HPR'\\\"> <div class=\\\"form-group line-spacer-xs\\\"> <label for=appCriteria>Application Criteria</label> <div ng-class=\\\"{'has-error': step5Form.appCriteria.$invalid && (step5Form.appCriteria.$touched || $ctrl.submitted)}\\\"> <custom-select> <select id=appCriteria name=appCriteria class=form-control ng-model=$ctrl.model.appCriteria ng-options=\\\"item for item in $ctrl.appCriteriaOpt\\\" aria-describedby=appCriteriaErrMsg ng-change=$ctrl.getDataFromBackend() aria-invalid=\\\"{{step5Form.appCriteria.$invalid && (step5Form.appCriteria.$touched || $ctrl.submitted)}}\\\" required> <option value=\\\"\\\">Please select</option> </select> </custom-select> </div> <div id=appCriteriaErrMsg ng-class=\\\"{'has-error': step5Form.appCriteria.$invalid}\\\"> <validation-msg ng-if=\\\"step5Form.appCriteria.$error.required && (step5Form.appCriteria.$touched || $ctrl.submitted)\\\"> Please select your application criteria using the drop-down menu to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row ng-if=\\\"$ctrl.model.employmentStatus == 'Student' && $ctrl.selectedCard.key=='HPR'\\\"> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=startDate>Course Start Date</label> <div ng-class=\\\"{'has-error': step5Form.startDate.$invalid && ($ctrl.submitted || step5Form.startDate.$touched)}\\\"> <input type=date id=startDate name=startDate ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.startDate aria-describedby=startDateErrMsg aria-invalid=\\\"{{step5Form.startDate.$invalid && (step5Form.startDate.$touched || $ctrl.submitted)}}\\\" required> </div> </div> <div id=startDateErrMsg ng-class=\\\"{'has-error': step5Form.startDate.$invalid}\\\"> <validation-msg ng-if=\\\"step5Form.startDate.$error.required && (step5Form.startDate.$touched || $ctrl.submitted)\\\"> Please enter your Course Start Date using the calendar icon to continue with your application. </validation-msg> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=endDate>Course End Date</label> <div ng-class=\\\"{'has-error': step5Form.endDate.$invalid && ($ctrl.submitted || step5Form.endDate.$touched)}\\\"> <input type=date id=endDate name=endDate ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.endDate aria-describedby=endDateErrMsg aria-invalid=\\\"{{step5Form.endDate.$invalid && (step5Form.endDate.$touched || $ctrl.submitted)}}\\\" required> </div> </div> <div id=endDateErrMsg ng-class=\\\"{'has-error': step5Form.endDate.$invalid}\\\"> <validation-msg ng-if=\\\"step5Form.endDate.$error.required && (step5Form.endDate.$touched || $ctrl.submitted)\\\"> Please enter your Course End Date using the calendar icon to continue with your application. </validation-msg> </div> </div> </div> <div class=row ng-if=\\\"$ctrl.model.appCriteria === 'TRB' &&  $ctrl.showTrbData\\\"> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=trbBalanceValue>Total Assets (TRB)</label> <div ng-class=\\\"{'has-error': step5Form.trbBalanceValue.$invalid && ($ctrl.submitted || step5Form.trbBalanceValue.$touched)}\\\"> <input type=tel id=trbBalanceValue name=trbBalanceValue ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.trbBalanceValue ng-disabled=true> </div> </div> </div> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=limitAssignedValue>Total HSBC Exposure (Limit Assigned)</label> <div ng-class=\\\"{'has-error': step5Form.limitAssignedValue.$invalid && ($ctrl.submitted || step5Form.limitAssignedValue.$touched)}\\\"> <input type=tel id=limitAssignedValue name=limitAssignedValue ng-minlength=0 maxlength=100 class=form-control ng-model=$ctrl.model.limitAssignedValue ng-disabled=true> </div> </div> </div> </div> </div> <step-footer show-back=true back-callback=$ctrl.goback() show-proceed=false show-continue=\\\"$ctrl.isStaffJourney || !$ctrl.isStaffJourney\\\" continue-callback=$ctrl.next(step5Form) proceed-callback=$ctrl.next(step5Form.$valid) skip-callback=$ctrl.skip(step5Form.$valid) skip-overlay=true> </step-footer> </form> </div> <form ng-form-commit ng-show=false name=autoform method=post action=\\\"{{$ctrl.perfiosUrl | trustedUrl}}\\\"> <input ng-model=$ctrl.formPayload name=payload> <input ng-model=$ctrl.formSignature name=signature> <button type=button ng-click=save(autoform)>buy</button> </form>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step5/step5.component.html\n// module id = ./src/app/components/journey/step5/step5.component.html\n// module chunks = 4","(function () {\r\n    'use strict';\r\n    var angular = require('angular');\r\n    var env = require(\"config\");\r\n    require('./step5.service');\r\n    require('./step5.component.scss');\r\n    require('./skip-modal/skip-modal.component');\r\n    require('./perfios-loader/perfios-loader-modal.component');\r\n\r\n    function step5Controller($rootScope, $state, $anchorScroll, step5Service, $uibModal, analyticService, $timeout, journeyService, UtilService, appState) {\r\n        var vm = this;\r\n        vm.$onInit = function () {\r\n            $rootScope.showSelectedCard = true;\r\n            $rootScope.showARN = false;\r\n            $rootScope.stepsHeader.currentStep = 2;\r\n            vm.perfiosUrl = env.PERFIOS_URL;\r\n            vm.isStaffJourney = journeyService.isStaffJourney();\r\n            vm.selectedCard = journeyService.getSelectedCard();\r\n            // console.log(\"selected card==\", vm.selectedCard);\r\n            var contactData = appState.getContactDetails();\r\n            if (!vm.isStaffJourney) {\r\n                vm.cardTypeAE = \"Primary Card\";\r\n            } else {\r\n                vm.cardTypeAE = contactData.cardType;\r\n            }\r\n            // if(vm.selectedCard.key != 'HPR'){\r\n                vm.employmentStatus = ['Employed (salaried)', 'Housewife', 'Retired', 'Student', 'Self-Employed', 'Unemployed'];\r\n                //  }\r\n            // vm.appCriteriaOpt = ['TRB','Other'];//commented @28.06.24\r\n            vm.appCriteriaOpt = ['TRB'];\r\n\r\n\r\n            vm.model = {};\r\n            // vm.model = step5Service.getUserDetails();\r\n            // if (vm.model.perfiosCheck && vm.model.navToThirdPartyUrl) {\r\n            //     checkPerfios();\r\n            //     // Mark that Perfios status check is done.\r\n            //     step5Service.setDataInStorage({ \"navToThirdPartyUrl\": false });\r\n            // }\r\n            checkPerfios();\r\n            journeyService.getErrorMessages().then(function (data) {\r\n                vm.errorMessages = data.step5;\r\n            });\r\n            vm.isStaffJourney = journeyService.isStaffJourney();\r\n            analyticService.pageList.employmentDetails.internal_reference_id = journeyService.getDataFromStorageContact().adobeId;\r\n            analyticService.trackPageLoad(analyticService.pageList.employmentDetails);\r\n            $anchorScroll();\r\n        };\r\n\r\n        var checkPerfios = function () {\r\n            // step5Service.getPerfiosStatus().then(function (result) {//commented to stop perfios call\r\n\r\n            vm.model = step5Service.getUserDetails();\r\n            vm.model.employmentStatus = vm.employmentStatus[0];\r\n            if(vm.selectedCard.key == 'SVC'){\r\n                    vm.employmentStatus  = ['Employed (salaried)', 'Self-Employed'];\r\n                }\r\n            console.log(\"Selected value from frontend common ======== \" + vm.employmentStatus);\r\n\r\n            // if(!vm.isStaffJourney) {// was already commented\r\n            //     vm.model.employmentStatus = vm.employmentStatus[0];\r\n            //     console.log(\"Selected value from frontend 1 ======== \" + vm.employmentStatus);\r\n            // }\r\n            //  else if (vm.isStaffJourney && vm.cardTypeAE == 'Primary Card') {\r\n            //     vm.model.employmentStatus = vm.employmentStatus[0];\r\n            //     console.log(\"Selected value from frontend 2 ======== \" + vm.employmentStatus);\r\n            // } else {\r\n            //     vm.model.employmentStatus = vm.employmentStatus;\r\n            //     console.log(\"Selected value from frontend 3 ======== \" + vm.employmentStatus);\r\n            // };\r\n\r\n\r\n\r\n\r\n            // if (result.status === 'OK') {//commented to stop perfios call\r\n            //     step5Service.setDataInStorage({ \"navToThirdPartyUrl\": false });\r\n            //     if (result.panStatus) {\r\n            //         $state.go('app.journey.s6-incomeDetails',{'cardKey':vm.selectedCard.key});\r\n            //     } else {\r\n            //         analyticService.buttonList.error.event_content = \"PAN mismatch error\";\r\n            //         analyticService.trackUserAction(analyticService.buttonList.error);\r\n            //         $state.go('app.pan-mismatch',{'cardKey':vm.selectedCard.key});\r\n            //     }\r\n            // }\r\n            // });//commented to stop perfios call\r\n        };\r\n\r\n        vm.skip = function (isValid) {\r\n            var modalInstance = $uibModal.open({\r\n                component: \"skipModal\"\r\n            });\r\n            modalInstance.result.then(function (isSelected) {\r\n                if (isSelected) {\r\n                    if (isValid) {\r\n                        var data = {\r\n                            \"employmentStatus\": vm.model.employmentStatus,\r\n                            \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n                        };\r\n                        // console.log(\"Data while skiping the page ======= \" + JSON.stringify(data));\r\n                        var securityParams = {\r\n                            robocheck: vm.robocheck ? vm.robocheck : ''\r\n                        };\r\n                        step5Service.sendEmploymentDetails(data, securityParams, 'Y').then(function (result) {\r\n                            if (result.success) {\r\n                                $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n                            } else if (result.errorCode === 10006) {\r\n                                //arun else if condition\r\n                                //vm.errMsg = \"Sorry! there seems to be some technical error. Please try again\";\r\n                                $state.go('app.journey.s1-cards');\r\n                            }\r\n                        });\r\n                    } else {\r\n                        vm.submitted = true;\r\n                    }\r\n                }\r\n            }, function () { });\r\n            analyticService.buttonList.buttonClick.event_content = \"skip and upload income documents\";\r\n            analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n        };\r\n\r\n        vm.goback = function () {\r\n            // var data = {\r\n            //     \"employmentStatus\": vm.model.selectedEmploymentStatus,\r\n            //     \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n            // };\r\n            // step5Service.setDataInStorage(data);\r\n            // $state.go('app.journey.s4-personalDemographic');\r\n            $state.go('app.journey.s3-personalDetails', { 'cardKey': vm.selectedCard.key });\r\n            analyticService.buttonList.buttonClick.event_content = \"back\";\r\n            analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n        };\r\n\r\n        vm.next = function (step5Form) {\r\n            // console.log(\"for valid ======= \" + step5Form);\r\n            if (vm.selectedCard.key == 'HPR') {\r\n                // console.log(\"hpr 1======= \", vm.selectedCard.key);\r\n                goHPR(step5Form);\r\n            } else {\r\n                // console.log(\"other======= \", vm.selectedCard.key);\r\n                if (vm.model.employmentStatus !== null) {\r\n                    var data = {\r\n                        \"employmentStatus\": vm.model.employmentStatus,\r\n                        \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n                    };\r\n                    // console.log(\"Data when sending to next page ======= \" + JSON.stringify(data));\r\n                    var securityParams = {\r\n                        robocheck: vm.robocheck ? vm.robocheck : ''\r\n                    };\r\n                    step5Service.sendEmploymentDetails(data, securityParams, data.hasSkippedPerfios).then(function (result) {\r\n                        if (result.success) {\r\n                            $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n                        }\r\n                        else if (result.errorCode === 10006) {\r\n                            $state.go('app.journey.s1-cards');\r\n                        }\r\n                    });\r\n                    analyticService.buttonList.buttonClick.event_content = \"proceed\";\r\n                    analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n                } else {\r\n                    vm.submitted = true;\r\n                    UtilService.focusOnInvalid(\"step5Form\");\r\n                }\r\n            }\r\n        };\r\n        var goHPR = function (step5Form) {\r\n            // console.log(\"go HPR\");\r\n            if (step5Form.$valid) {\r\n                // console.log(\" valid\")\r\n                if (!vm.showTrbData) {\r\n                    console.log(\" trb is empty\")\r\n                    return;\r\n                }\r\n                var data = {\r\n                    \"employmentStatus\": vm.model.employmentStatus,\r\n                    \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y',\r\n                    \"applicationCriteria\": vm.model.appCriteria,\r\n                    \"courseStartDate\": document.getElementById(\"startDate\") == null ? null : document.getElementById(\"startDate\").value,\r\n                    \"courseEndDate\": document.getElementById(\"endDate\") == null ? null : document.getElementById(\"endDate\").value,\r\n                };\r\n                // console.log(\"Data when sending to next page HPR======= \" + JSON.stringify(data));\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                step5Service.sendEmploymentDetails(data, securityParams, data.hasSkippedPerfios).then(function (result) {\r\n                    if (result.success) {\r\n                        $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n                    }\r\n                    else if (result.errorCode === 10006) {\r\n                        //arun else if condition\r\n                        //vm.errMsg = \"Sorry! there seems to be some technical error. Please try again\";\r\n                        $state.go('app.journey.s1-cards');\r\n                    } else if (result.errorCode) {\r\n                        vm.errMsg = result.message;\r\n                    }\r\n                });\r\n                analyticService.buttonList.buttonClick.event_content = \"proceed\";\r\n                analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n            } else {\r\n                // console.log(\"not valid\")\r\n                UtilService.focusOnInvalid('step5Form');\r\n            }\r\n        }\r\n        vm.getDataFromBackend = function () {\r\n            vm.errMsg = \"\";\r\n            vm.showTrbMessage = \"\";\r\n            // console.log(\"selected Appcriteria==\", vm.model.appCriteria)\r\n            if (vm.model.appCriteria == 'TRB' && vm.selectedCard.key == 'HPR') {\r\n                console.log(\"Hi for trb for \" + vm.model.appCriteria);\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                var reqData = {\r\n                    appCriteriaFrontend: vm.model.appCriteria\r\n                }\r\n                // console.log(\"data==\", JSON.stringify(reqData));\r\n                step5Service.getTRBDataFromIbps(reqData, securityParams).then(function (result) {\r\n                    // console.log(\"backend channel all data==\", JSON.stringify(result));\r\n                    if (result.success) {\r\n                        vm.showTrbData = true;\r\n                        vm.model.trbBalanceValue = result.trbBalanceAmount;\r\n                        vm.model.limitAssignedValue = result.limitAssigned;\r\n                        vm.showTrbMessage = true;\r\n                        vm.trbApiResponseMsg = result.responseMessage;\r\n                    } else {\r\n                        vm.showTrbData = false;\r\n                        vm.errMsg = result.responseMessage;\r\n                    }\r\n                });\r\n            } else {\r\n                console.log(\"No for trb for \" + vm.model.appCriteria);\r\n            }\r\n        }\r\n\r\n        vm.continue = function (isValid) {\r\n            if (isValid) {\r\n                $state.go('app.journey.s6-incomeDetails', { 'cardKey': vm.selectedCard.key });\r\n            } else {\r\n                vm.submitted = true;\r\n            }\r\n        };\r\n\r\n        vm.saveAndNavToPerfios = function (isValid) {\r\n            if (isValid) {\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                step5Service.getPerfiosReport(securityParams).then(function (response) {\r\n                    if (response) {\r\n                        var data = {\r\n                            \"employmentStatus\": vm.model.employmentStatus,\r\n                            // \"hasSkippedPerfios\": vm.model.perfiosCheck ? 'N' : 'Y'\r\n                            \"hasSkippedPerfios\": 'Y'\r\n                        };\r\n                        // console.log(\"Data while saving and navigating to perfios ======= \" + JSON.stringify(data));\r\n                        step5Service.sendEmploymentDetails(data, securityParams, 'N').then(function (result) {\r\n                            if (result.success) {\r\n                                var perfiosLoader = $uibModal.open({\r\n                                    component: \"perfiosLoader\",\r\n                                    backdrop: \"static\",\r\n                                    size: \"md\"\r\n                                });\r\n                                journeyService.setDisableBrowserClose(true);\r\n                                vm.model.perfiosCheck = true;\r\n\r\n                                vm.formPayload = response.payload;\r\n                                vm.formSignature = response.signature;\r\n                                $timeout(function () {\r\n                                    document.forms['autoform'].submit();\r\n                                }, 2000);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n                analyticService.buttonList.buttonClick.event_content = \"continue\";\r\n                analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n            } else {\r\n                vm.submitted = true;\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    var step5Comp = angular.module('journey.module').component('step5', {\r\n        template: require('./step5.component.html'),\r\n        controller: ['$rootScope', '$state', '$anchorScroll', 'step5Service', '$uibModal', 'analyticService', '$timeout', 'journeyService', 'UtilService', 'appState', step5Controller]\r\n    });\r\n    module.exports = step5Comp.name;\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step5/step5.component.js\n// module id = ./src/app/components/journey/step5/step5.component.js\n// module chunks = 4","(function () {\r\n    'use strict';\r\n    // var jsonpatch = require('fast-json-patch');\r\n\r\n    var step5Service = angular.module('journey.module').service('step5Service', ['$rootScope', '$http', '$q', 'appState', 'CONFIG', function ($rootScope, $http, $q, appState, CONFIG) {\r\n        var self = this;\r\n\r\n        self.setDataInStorage = function (data) {\r\n            var appData = {\r\n                \"primaryApplicant\": data\r\n            };\r\n            appState.mergeApplicationData(appData);\r\n        };\r\n\r\n        var getApplicantInfo = function (prop) {\r\n            var localState = appState.getApplicationData();\r\n            if (localState.primaryApplicant && localState.primaryApplicant[prop]) {\r\n                return localState.primaryApplicant[prop];\r\n            } else {\r\n                return null;\r\n            }\r\n        };\r\n\r\n        self.sendEmploymentDetails = function (data, securityParams, skippedPerfios) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/applicantdetails/employmentdetails/perfios/save/' + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step5_employment-details/employment_details_perfios_save.json';\r\n            }\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(data),\r\n                params: securityParams\r\n            }).then(function (response) {\r\n                if (response.status === 200 && response.data) {\r\n                    appState.setEmployerName(response.data.employerName);\r\n                    //INM-1767: Clear employment details if user has changed employment status or changed Perfios status\r\n                    var savedEmpStatus = getApplicantInfo(\"employmentStatus\");\r\n                    var hasSkippedPerfios = getApplicantInfo(\"hasSkippedPerfios\");\r\n                    if ((savedEmpStatus !== data.employmentStatus) || (hasSkippedPerfios !== skippedPerfios)) {\r\n                        self.setDataInStorage({\r\n                            \"employmentDetails\": null\r\n                        });\r\n                    }\r\n                    self.setDataInStorage(data);\r\n                    return response.data;\r\n                } else if (response && response.validationErrors) {\r\n                    //return pageError = \"Please ensure the values added in form fields are appropriate, and retry.\";\r\n                } else {\r\n                    //Need to display \"response\" below page heading (above form).\r\n                    //vm.pageError = \"Some error occurred on the server side. Please try after some time.\";\r\n                }\r\n                return;\r\n            }, function (response) {\r\n                return;\r\n            });\r\n        };\r\n\r\n        self.getUserDetails = function () {\r\n            var userDTO = {},\r\n                localState = appState.getApplicationData();\r\n            if (localState) {\r\n                if (localState.primaryApplicant) {\r\n                    userDTO.selectedEmploymentStatus = localState.primaryApplicant.employmentStatus ? localState.primaryApplicant.employmentStatus : null;\r\n                    userDTO.perfiosCheck = localState.primaryApplicant.hasSkippedPerfios ? localState.primaryApplicant.hasSkippedPerfios : 'Y';\r\n                    userDTO.perfiosCheck = userDTO.perfiosCheck === 'Y' ? false : true;\r\n                    // userDTO.hasDonePerfios = localState.primaryApplicant.hasDonePerfios;\r\n                }\r\n            }\r\n            return userDTO;\r\n        };\r\n\r\n        self.getPerfiosReport = function (securityParams) {\r\n            var apiURL, httpMethod;\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/perfiosAPI/generatePerfiosReport/' + getApplicantInfo('arn');\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step5_employment-details/perfios_report.json';\r\n            }\r\n            var perfiosData = {\r\n                \"dob\": getApplicantInfo('dateOfBirth'),\r\n                \"email\": getApplicantInfo('email')\r\n            };\r\n            return $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(perfiosData),\r\n                params: securityParams\r\n            }).then(function (response) {\r\n                return response.data;\r\n            });\r\n        };\r\n\r\n        self.getPerfiosStatus = function () {\r\n            var apiURL,\r\n                deferred = $q.defer();\r\n            if ($rootScope.integrationsActive) {\r\n                apiURL = CONFIG.apiUrl + '/perfiosAPI/statusCheckTxn/' + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n            } else {\r\n                apiURL = 'resources/data/mock/step5_employment-details/perfios_status.json';\r\n            }\r\n            $http({\r\n                method: 'GET',\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(function (response) {\r\n                var data = {\r\n                    \"status\": 'OK'\r\n                };\r\n                if (response && response.status === 200 && response.data && response.data.success) {\r\n                    self.setDataInStorage({ \"hasSkippedPerfios\": \"N\" });\r\n                    if (response.data.errorCode === 8001) {\r\n                        // Perfios Transaction Deleted\r\n                        data.status = 'DELETED';\r\n                        deferred.resolve(data);\r\n                    } else {\r\n                        var perfiosTxnId = response.data.message;\r\n                        getPerfiosIncomeData(perfiosTxnId).then(function (result) {\r\n                            if (result.panStatusFlag !== 'PAN_MISMATCH') {\r\n                                persistIncomeData(result);\r\n                                data.panStatus = true;\r\n                                deferred.resolve(data);\r\n                            } else {\r\n                                data.panStatus = false;\r\n                                deferred.resolve(data);\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    self.setDataInStorage({\r\n                        \"hasSkippedPerfios\": \"Y\"\r\n                    });\r\n                    data.status = 'FAILURE';\r\n                    deferred.resolve(data);\r\n                }\r\n            }, function (response) {\r\n                deferred.reject(\"Some error occured!\");\r\n            });\r\n            return deferred.promise;\r\n        };\r\n\r\n        var persistIncomeData = function (data) {\r\n            var applicantData = {\r\n                \"panStatusFlag\": data.panStatusFlag,\r\n                \"employmentDetails\": {\r\n                    // \"accountNumber\": data.accountNumber,\r\n                    // \"primaryBank\": data.primaryBankName,\r\n                    \"companyName\": data.companyName,\r\n                    \"perfiosCompanyName\": data.companyName,\r\n                    \"annualIncome\": data.grossAnnualIncome,\r\n                    \"isUnhapppyJourney\": data.isUnhapppyJourney\r\n                }\r\n            };\r\n            self.setDataInStorage(applicantData);\r\n        };\r\n\r\n        var getPerfiosIncomeData = function (perfiosTransactionId) {\r\n            var apiURL, httpMethod, def = $q.defer();\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/applicantdetails/getincomedetails/' + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step5_employment-details/perfios_income_data.json';\r\n            }\r\n            $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(function (response) {\r\n                if (response && response.status === 200 && response.data) {\r\n                   // deletePerfiosTransaction(perfiosTransactionId); commented by rashmi 20200302\r\n                    def.resolve(response.data);\r\n                } else {\r\n                    def.resolve({ panStatusFlag: 'FAILED' });\r\n                }\r\n            });\r\n            return def.promise;\r\n        };\r\n\r\n        var deletePerfiosTransaction = function (perfiosTransactionId) {\r\n            if (!$rootScope.integrationsActive) {\r\n                return;\r\n            }\r\n            $http({\r\n                method: 'POST',\r\n                url: CONFIG.apiUrl + '/perfiosAPI/deleteTransaction',\r\n                data: perfiosTransactionId\r\n            });\r\n        };\r\n        self.getTRBDataFromIbps = function (reqData, securityParams) {\r\n            //  console.log(\"ReqData at service==\",JSON.stringify(reqData));\r\n            //  console.log(\"arn===\",getApplicantInfo('arn'));\r\n             var apiURL, httpMethod;\r\n             if ($rootScope.integrationsActive) {\r\n                 httpMethod = \"POST\";\r\n                 apiURL = CONFIG.apiUrl + '/applicantdetails/employmentdetails/getTrbData/'  + getApplicantInfo('arn') + '?hash_id=' + Math.random();\r\n             } else {\r\n                 httpMethod = \"GET\";\r\n                 apiURL = 'resources/data/mock/step5_employment-details/getTrbDataFromIbps.json';\r\n                }\r\n             return $http({\r\n                 method: httpMethod,\r\n                 url: apiURL,\r\n                 headers: {\r\n                     'Content-Type': 'application/json'\r\n                 },\r\n                 data: reqData,\r\n                 params: securityParams\r\n             }).then(function (response) {\r\n                 if (response && response.status === 200 && response.data) {\r\n                     return response.data;\r\n                 }\r\n             });\r\n         };\r\n    }]);\r\n\r\n    module.exports = step5Service.name;\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step5/step5.service.js\n// module id = ./src/app/components/journey/step5/step5.service.js\n// module chunks = 4"],"sourceRoot":""}