webpackJsonp([16],{"./src/app/components/journey/staff-details/staff-details.component.html":/*!*******************************************************************************!*\
  !*** ./src/app/components/journey/staff-details/staff-details.component.html ***!
  \*******************************************************************************/
function(e,t){e.exports='<form name=staffForm autocomplete=off novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class="col-md-12 col-sm-12 col-xs-12"> <h1 class="brand-bar no-margin-top"> Referrer staff details </h1> <alert-msg ng-if=$ctrl.showOtpSent type=SUCCESS close=$ctrl.closeSuccessMsg()> One Time Password (OTP) has been sent to the Mobile number {{$ctrl.staffMobile}}. Please click "Re-send OTP" if you have not received OTP </alert-msg> <alert-msg ng-if=$ctrl.showErr type=ERROR> {{$ctrl.errMsg}} </alert-msg> </div> </div> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div class=form-group> <label for=psid>People Soft ID (PSID)</label> <div ng-class="{\'has-error\': staffForm.psid.$invalid && ($ctrl.submitted || staffForm.psid.$touched)}"> <input trim type=tel id=psid name=psid class=form-control ng-model=$ctrl.model.psid only-number=8 ng-maxlength=8 aria-describedby=psidErrMsg aria-invalid="{{staffForm.psid.$invalid && ($ctrl.submitted || staffForm.psid.$touched)}}" disabled=disabled required> </div> <div id=psidErrMsg ng-class="{\'has-error\': staffForm.psid.$invalid}"> <validation-msg ng-if="staffForm.psid.$error.required && (staffForm.psid.$touched || $ctrl.submitted)"> Please enter your PSID. </validation-msg> <validation-msg ng-if="staffForm.psid.$error.minlength && (staffForm.psid.$touched || $ctrl.submitted)"> Please enter valid PSID. </validation-msg> </div> </div> </div> </div> <div ng-if=$ctrl.otpSent class=line-spacer> <div class=form-group> <label for=otp>OTP</label> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div ng-class="{\'has-error\': staffForm.otp.$invalid && ($ctrl.submitted || staffForm.otp.$touched)}"> <input trim type="{{$ctrl.showOtp?\'tel\':\'password\'}}" id=otp name=otp class=form-control ng-model=$ctrl.model.otp only-number=6 ng-minlength=6 aria-describedby=psidErrMsg aria-invalid="{{staffForm.otp.$invalid && ($ctrl.submitted || staffForm.otp.$touched)}}" required/> </div> <div id=psidErrMsg ng-class="{\'has-error\': staffForm.otp.$invalid}"> <validation-msg ng-if="staffForm.otp.$error.required && (staffForm.otp.$touched || $ctrl.submitted)"> Please enter OTP </validation-msg> <validation-msg ng-if="staffForm.otp.$error.minlength && (staffForm.otp.$touched || $ctrl.submitted)"> Invalid OTP </validation-msg> </div> </div> <div class="col-md-4 col-sm-6 col-xs-12 line-spacer-xs"> <span class=link-text ng-click=$ctrl.generateOtp(staffForm)>Re-send OTP</span> </div> </div> </div> <div class="form-group line-spacer"> <input type=checkbox id=showOtpChk name=showOtpChk class=screen-reader-only ng-model=$ctrl.showOtp ng-focus="$ctrl.hasChkFocus = true;" ng-blur="$ctrl.hasChkFocus = false;"> <label for=showOtpChk class=checkbox-label ng-class="{\'focus\': $ctrl.hasChkFocus}">Show OTP</label> </div> <p class=disclaimer> By entering the OTP above, I certify that I have met the Credit Card applicant in person (Face to Face) and have assisted the applicant to complete the application journey. </p> </div> <step-footer show-generate-otp=!$ctrl.otpSent generate-otp-callback=$ctrl.generateOtp(staffForm) show-save=true save-callback=$ctrl.save() show-continue=$ctrl.otpSent continue-callback=$ctrl.submit(staffForm)> </step-footer> </form>'},"./src/app/components/journey/staff-details/staff-details.component.js":/*!*****************************************************************************!*\
  !*** ./src/app/components/journey/staff-details/staff-details.component.js ***!
  \*****************************************************************************/
function(e,t,r){!function(){"use strict";var t=r(/*! angular */"./node_modules/angular/index.js");r(/*! ./staff-details.component.scss */"./src/app/components/journey/staff-details/staff-details.component.scss"),r(/*! ./staff-details.service */"./src/app/components/journey/staff-details/staff-details.service.js");var s=t.module("journey.module").component("staffDetails",{template:r(/*! ./staff-details.component.html */"./src/app/components/journey/staff-details/staff-details.component.html"),controller:["$rootScope","$anchorScroll","$uibModal","$state","$timeout","analyticService","journeyService","staffService",function(e,t,r,s,o,a,n,i){var c,l=this;l.$onInit=function(){e.$broadcast("hide-step-header",{hideHeader:!1}),e.showSelectedCard=!0,l.selectedCard=n.getSelectedCard(),e.showARN=!0,t(),e.stepsHeader.currentStep=5,l.otpSent=!1,l.model={},l.model.psid=n.getApplicantInfo("psid"),e.dipARN=n.getDataFromStorage().primaryApplicant.dipDetails.dipArn,a.trackPageLoad(a.pageList.staffDetails)},l.generateOtp=function(e){if(e.psid.$valid){var t={robocheck:l.robocheck?l.robocheck:""},r={psid:l.model.psid,otp:""};i.generateOtp(r,t).then(function(e){e.success?(c=e.txnId,l.staffMobile=e.mobile,l.otpSent=!0,l.showOtpSent=!0,l.showErr=!1,l.submitted=!1):(l.showOtpSent=!1,l.showErr=!0,1e4===e.errorCode?(l.errMsg="Invalid PSID",a.buttonList.error.event_content="Invalid PSID error",a.trackUserAction(a.buttonList.error)):10001===e.errorCode?(l.errMsg="Inactive PSID",a.buttonList.error.event_content="Inactive PSID error",a.trackUserAction(a.buttonList.error)):l.errMsg=e.message)}),a.buttonList.buttonClick.event_content="generate otp",a.trackUserAction(a.buttonList.buttonClick)}else l.submitted=!0},l.submit=function(e){if(e.otp.$valid){l.submitted=!1;var t={robocheck:l.robocheck?l.robocheck:""},r={txnId:c,otp:l.model.otp,psid:l.model.psid};i.validateOtp(r,t).then(function(e){e.success?s.go("app.complete-ack",{saveData:{statusCode:e.errorCode,autoUrl:e.leadGenerationReason},cardKey:l.selectedCard.key}):(l.submitted=!0,l.showOtpSent=!1,l.showErr=!0,1005===e.errorCode?(l.errMsg="Expired OTP, please regenerate OTP and retry",a.buttonList.error.event_content="OTP expired error",a.trackUserAction(a.buttonList.error)):1003===e.errorCode?(l.errMsg="Invalid OTP",a.buttonList.error.event_content="Invalid OTP error",a.trackUserAction(a.buttonList.error)):10009===e.errorCode?(l.errMsg="VIDEO_KYC_FAILED",a.buttonList.error.event_content="Invalid OTP error",a.trackUserAction(a.buttonList.error)):l.errMsg=e.message)})}else l.submitted=!0},l.save=function(){r.open({backdrop:"static",keyboard:!1,modalFade:!0,component:"overlaySaveConfirmation",windowClass:"card-detail-modal center-modal"}).result.then(function(t){if(t){var r={robocheck:l.robocheck?l.robocheck:""};i.save(r).then(function(t){t.success?s.go("app.save-exit",{cardKey:l.selectedCard.key}):3==t.errorCode?s.go("app.journey.s1-cards"):4==t.errorCode&&(e.sessionError=!0,s.go("app.app-retrieval"))})}}),a.buttonList.buttonClick.event_content="save for later",a.trackUserAction(a.buttonList.buttonClick)}}]});e.exports=s.name}()},"./src/app/components/journey/staff-details/staff-details.component.scss":/*!*******************************************************************************!*\
  !*** ./src/app/components/journey/staff-details/staff-details.component.scss ***!
  \*******************************************************************************/
function(e,t){},"./src/app/components/journey/staff-details/staff-details.service.js":/*!***************************************************************************!*\
  !*** ./src/app/components/journey/staff-details/staff-details.service.js ***!
  \***************************************************************************/
function(e,t){!function(){"use strict";var t=angular.module("journey.module").service("staffService",["$rootScope","$http","CONFIG","journeyService",function(e,t,r,s){var o=this;o.save=function(o){var a,n;return e.integrationsActive?(n="POST",a=r.apiUrl+"/applicantdetails/staffdetails/save/"+s.getApplicantInfo("arn")+"?hash_id="+Math.random()):(n="GET",a="resources/data/mock/staff-details/staff-details_save.json"),t({method:n,url:a,headers:{"Content-Type":"application/json"},params:o}).then(function(e){return 200===e.status&&e.data?e.data:{success:!1,message:"Sorry! there seems to be some technical error."}},function(e){return{success:!1,message:"Sorry! there seems to be some technical error."}})},o.validateOtp=function(o,a){var n,i;return e.integrationsActive?(i="POST",n=r.apiUrl+"/staffjourney/validateOTP/"+s.getApplicantInfo("arn")+"?hash_id="+Math.random()):(i="GET",n="resources/data/mock/staff-details/staff-details_validate_otp.json"),t({method:i,url:n,headers:{"Content-Type":"application/json"},data:o,params:a}).then(function(e){return 200===e.status&&e.data?e.data:{success:!1,message:"Sorry! there seems to be some technical error."}},function(e){return{success:!1,message:"Sorry! there seems to be some technical error."}})},o.generateOtp=function(o,a){var n,i;return e.integrationsActive?(i="POST",n=r.apiUrl+"/staffjourney/generateOtp/"+s.getApplicantInfo("arn")+"?hash_id="+Math.random()):(i="GET",n="resources/data/mock/staff-details/staff-details_generate_otp.json"),t({method:i,url:n,headers:{"Content-Type":"application/json"},data:o,params:a}).then(function(e){return 200===e.status&&e.data?e.data:{success:!1,message:"Sorry! there seems to be some technical error."}},function(e){return{success:!1,message:"Sorry! there seems to be some technical error."}})}}]);e.exports=t.name}()}});
//# sourceMappingURL=a8157b03f3a4611fbca416.js.map