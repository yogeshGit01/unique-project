webpackJsonp([23],{"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html":/*!***********************************************************************************!*\
  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html ***!
  \***********************************************************************************/
function(e,r){e.exports='<div class="view-container header-spacer"> <form name=retrievalForm autocomplete=off novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class="col-md-12 col-sm-12 col-xs-12"> <h1 class="h3 no-margin-t" tabindex=0>Retrieve Application </h1></div> <div class="col-md-12 col-sm-12 col-xs-12"> <h2 class="brand-bar no-margin-top" tabindex=0>Please enter the details below to retrieve your application. </h2></div> </div> <alert-msg ng-if=$ctrl.showOtpSent type=SUCCESS close=$ctrl.closeSuccessMsg()> Verification code has been sent to the mobile number {{$ctrl.staffMobile}}. Please click "Re-send verification code" if you have not received verification code </alert-msg> <alert-msg ng-if=$ctrl.errMsg type=ERROR> {{$ctrl.errMsg}} </alert-msg> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div class=form-group> <label for=pan>PAN</label> <div ng-class="{\'has-error\': retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.submitted)}"> <input type=text id=pan aria-describedby=panErrMsg trim auto-caps class=form-control alpha-num=10 ng-paste=$ctrl.pasteInput(1,$event) name=pan ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder="As per ID" ng-disabled=$ctrl.nonEdit aria-invalid="{{retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.submitted)}}" required> </div> <div id=panErrMsg ng-class="{\'has-error\': (retrievalForm.pan.$invalid)}"> <validation-msg ng-if="(retrievalForm.pan.$error.required && retrievalForm.pan.$touched) ||(retrievalForm.pan.$error.required && $ctrl.submitted)"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if="retrievalForm.pan.$error.pattern && retrievalForm.pan.$touched"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div class="form-group line-spacer"> <label for=psid>People Soft ID (PSID)</label> <div ng-class="{\'has-error\': retrievalForm.psid.$invalid && ($ctrl.submitted || retrievalForm.psid.$touched)}"> <input trim type=tel id=psid name=psid class=form-control ng-model=$ctrl.model.psid only-number=8 ng-maxlength=8 aria-describedby=psidErrMsg aria-invalid="{{retrievalForm.psid.$invalid && ($ctrl.submitted || retrievalForm.psid.$touched)}}" required> </div> <div id=psidErrMsg ng-class="{\'has-error\': retrievalForm.psid.$invalid}"> <validation-msg ng-if="retrievalForm.psid.$error.required && (retrievalForm.psid.$touched || $ctrl.submitted)"> Please enter your PSID. </validation-msg> <validation-msg ng-if="retrievalForm.psid.$error.minlength && (retrievalForm.psid.$touched || $ctrl.submitted)"> Please enter valid PSID. </validation-msg> </div> </div> </div> </div> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div class="form-group line-spacer"> <input type=checkbox id=customerInitiated name=customerInitiated class=screen-reader-only ng-focus="$ctrl.hasChkFocus = true;" ng-blur="$ctrl.hasChkFocus = false;" ng-model=$ctrl.model.custCaseRetrive ng-true-value="\'Y\'" ng-false-value="\'N\'"> <label for=customerInitiated class=checkbox-label ng-class="{\'focus\': $ctrl.hasChkFocus}">Customer Journey Retrieval</label> </div> </div> </div> <div ng-if=$ctrl.otpSent class=line-spacer> <div class=form-group> <label for=otp>Verification code</label> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div ng-class="{\'has-error\': retrievalForm.otp.$invalid && ($ctrl.submitted || retrievalForm.otp.$touched)}"> <input trim type="{{$ctrl.showOtp?\'tel\':\'password\'}}" id=otp name=otp class=form-control ng-model=$ctrl.model.otp only-number=6 ng-minlength=6 aria-describedby=psidErrMsg aria-invalid="{{retrievalForm.otp.$invalid && ($ctrl.submitted || retrievalForm.otp.$touched)}}" required/> </div> <div id=psidErrMsg ng-class="{\'has-error\': retrievalForm.otp.$invalid}"> <validation-msg ng-if="retrievalForm.otp.$error.required && (retrievalForm.otp.$touched || $ctrl.submitted)"> Please enter OTP </validation-msg> <validation-msg ng-if="retrievalForm.otp.$error.minlength && (retrievalForm.otp.$touched || $ctrl.submitted)"> Invalid OTP </validation-msg> </div> </div> <div class="col-md-4 col-sm-6 col-xs-12 line-spacer-xs"> <span class=link-text ng-click=$ctrl.generateOtp(retrievalForm)>Re-send verification code</span> </div> </div> </div> <div class="form-group line-spacer"> <input type=checkbox id=showOtpChk name=showOtpChk class=screen-reader-only ng-model=$ctrl.showOtp ng-focus="$ctrl.hasChkFocus = true;" ng-blur="$ctrl.hasChkFocus = false;"> <label for=showOtpChk class=checkbox-label ng-class="{\'focus\': $ctrl.hasChkFocus}">Show verification code</label> </div> <p class=disclaimer> By entering the verification code above, I certify that I have met the Credit Card applicant in person (Face to Face) and have assisted the applicant to complete the application journey. </p> </div> <step-footer show-verify-code=!$ctrl.otpSent verify-code-callback=$ctrl.generateOtp(retrievalForm) show-continue=$ctrl.otpSent continue-callback=$ctrl.submit(retrievalForm)> </step-footer> </form> </div>'},"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js":/*!*********************************************************************************!*\
  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.js ***!
  \*********************************************************************************/
function(e,r,t){!function(){"use strict";var r=t(/*! angular */"./node_modules/angular/index.js");t(/*! ./app-retrieval-staff.component.scss */"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.scss"),t(/*! ./app-retrieval-staff.service */"./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js");var a=r.module("app").component("retrievalStaff",{template:t(/*! ./app-retrieval-staff.component.html */"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.html"),controller:["$scope","$state","$anchorScroll","$rootScope","analyticService","staffRetrieveService","UtilService",function(e,r,t,a,o,i,n){var s,c,l=this;l.$onInit=function(){a.sessionError&&(l.errMsg="Your session has timed out due to inactivity."),l.initControls(),o.trackPageLoad(o.pageList.retrieve),t()},l.initControls=function(){l.model={},i.getDataFromStorage()&&(i.getDataFromStorage().primaryApplicant?l.model.pan=i.getDataFromStorage().primaryApplicant.pan?i.getDataFromStorage().primaryApplicant.pan:null:i.getDataFromStorage().stateData?l.model.pan=i.getDataFromStorage().stateData.pan?i.getDataFromStorage().stateData.pan:null:l.model.pan=null,i.clearAppData()),l.model.pan?l.nonEdit=!0:l.nonEdit=!1},l.generateOtp=function(r){if(l.errMsg="",r.pan.$valid&&r.psid.$valid){var t={robocheck:l.robocheck?l.robocheck:""},a={pan:l.model.pan,psid:l.model.psid,custCaseRetrive:l.model.custCaseRetrive};i.generateOtp(a,t).then(function(e){e.success?(s=e.txnId,c=e.arn,l.staffMobile=e.mobile,l.otpSent=!0,l.showOtpSent=!0,l.submitted=!1):(l.showOtpSent=!1,2===e.errorCode?(l.errMsg="The case has already been submitted please check omniflow for further details.",o.buttonList.error.event_content="No Records found",o.trackUserAction(o.buttonList.error)):1e4===e.errorCode?(l.errMsg="Invalid PSID",o.buttonList.error.event_content="Invalid PSID error",o.trackUserAction(o.buttonList.error)):10001===e.errorCode?(l.errMsg="Inactive PSID",o.buttonList.error.event_content="Inactive PSID error",o.trackUserAction(o.buttonList.error)):100010===e.errorCode?(l.errMsg="PAN doesn't exist , kindly enter correct pan.",o.buttonList.error.event_content="Invalid PAN error",o.trackUserAction(o.buttonList.error)):100011===e.errorCode?(l.errMsg="Kindly click on checkbox to retrieve customer journey",o.buttonList.error.event_content="Invalid case retrive error",o.trackUserAction(o.buttonList.error)):100012===e.errorCode?(l.errMsg="Do not click on checkbox to retrieve the staff journey",o.buttonList.error.event_content="Invalid case retrive error",o.trackUserAction(o.buttonList.error)):l.errMsg=e.message)}),o.buttonList.buttonClick.event_content="Retrive Staff Application: Generate OTP",o.trackUserAction(o.buttonList.buttonClick)}else l.submitted=!0,n.focusOnInvalid(e.retrievalForm.$name)},l.submit=function(r){if(r.$valid){l.submitted=!1;var t={robocheck:l.robocheck?l.robocheck:""},d={txnId:s,otp:l.model.otp,arn:c,retryCount:0};i.retrieveApplication(d,t).then(function(r){r.success?(p(r.viewNumber,r.card),e.$emit("card-selected"),a.$broadcast("show-FRN")):(l.submitted=!0,l.showOtpSent=!1,l.showErr=!0,1005===r.errorCode?(l.errMsg="Expired verification code, please regenerate verification code and retry",o.buttonList.error.event_content="OTP expired error",o.trackUserAction(o.buttonList.error)):1003===r.errorCode?(l.errMsg="Invalid verification code",o.buttonList.error.event_content="Invalid OTP error",o.trackUserAction(o.buttonList.error)):l.errMsg=r.message)}),o.buttonList.buttonClick.event_content="Retrive Staff Application: Continue",o.trackUserAction(o.buttonList.buttonClick)}else l.submitted=!0,n.focusOnInvalid(e.retrievalForm.$name)};var p=function(e,t){switch(e){case 1:r.go("app.journey.s6-incomeDetails",{cardKey:t});break;case 2:r.go("app.journey.s7-review",{cardKey:t});break;case 3:r.go("app.journey.card-DIP",{cardKey:t});break;case 4:r.go("app.journey.balance-transfer",{cardKey:t});break;case 5:r.go("app.journey.supplementary",{cardKey:t});break;case 6:r.go("app.journey.document",{cardKey:t});break;case 7:case 8:r.go("app.journey.signature",{cardKey:t});break;case 9:r.go("app.journey.staff-details",{cardKey:t});break;case 10:r.go("app.journey.s5-employmentDetails",{cardKey:t});break;case 11:r.go("app.journey.s3-personalDetails",{cardKey:t});break;default:r.go("app.journey.s1-cards")}}}]});e.exports=a.name}()},"./src/app/components/app-retrieval-staff/app-retrieval-staff.component.scss":/*!***********************************************************************************!*\
  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.component.scss ***!
  \***********************************************************************************/
function(e,r){},"./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js":/*!*******************************************************************************!*\
  !*** ./src/app/components/app-retrieval-staff/app-retrieval-staff.service.js ***!
  \*******************************************************************************/
function(e,r){!function(){"use strict";var r=angular.module("app").service("staffRetrieveService",["$rootScope","appState","$http","CONFIG",function(e,r,t,a){var o=this;o.setDataInStorage=function(e,t){var a=angular.merge({},r.getApplicationData(),e);r.setApplicationData(a),t(null,e)},o.setRetrievalDataInStorage=function(e,t){r.setStaffJourney(!0);var a,o={primaryApplicant:e.primaryApplicantDetails},i={vcipType:e.vcipFlag,ekyc:e.ekycDone};a=null===e.ekycFlag?null!==e.ekycFlag:"N"!==e.ekycFlag,o.primaryApplicant.frnNumber=e.frnNumber,o.primaryApplicant.psid=e.psid,o.primaryApplicant.employmentStatus=e.employmentStatus,o.primaryApplicant.employmentDetails=e.employmentDetails,o.primaryApplicant.consents=e.consents,o.primaryApplicant.dipDetails=e.dipDetails,o.primaryApplicant.balanceTransfer=e.balanceTransfer,o.primaryApplicant.supplementaryCard=e.supplementaryCard,o.primaryApplicant.documents=e.documents,o.primaryApplicant.hasSkippedPerfios=e.hasSkippedPerfios,o.primaryApplicant.card=e.card,o.primaryApplicant.ekycFlag=a,o.primaryApplicant.isEsignLinkSent=e.isEsignLinkSent,o.primaryApplicant.isEsignCallback=e.isEsignCallback;var n=angular.merge({},r.getApplicationData(),o);r.setApplicationData(n),r.setContactDetails(i)},o.generateOtp=function(r,o){var i,n;return e.integrationsActive?(n="POST",i=a.apiUrl+"/staffretrieveapplication/otpgenerate?hash_id="+Math.random()):(n="GET",i="resources/data/mock/staff-details/staff-details_generate_otp.json"),t({method:n,url:i,headers:{"Content-Type":"application/json"},data:r,params:o}).then(function(e){return 200===e.status&&e.data?e.data:{success:!1,message:"Sorry! there seems to be some technical error."}},function(e){return{success:!1,message:"Sorry! there seems to be some technical error."}})},o.retrieveApplication=function(r,i){var n,s;return e.integrationsActive?(s="POST",n=a.apiUrl+"/staffretrieveapplication/fetchapplication?hash_id="+Math.random()):(s="GET",n="resources/data/mock/otp-verify/retrieve_fetch_application.json"),t({method:s,url:n,headers:{"Content-Type":"application/json"},data:JSON.stringify(r),params:i}).then(function(e){return e&&200===e.status&&e.data?1==e.data.errorCode?(o.setRetrievalDataInStorage(e.data),{success:!0,viewNumber:e.data.viewNumber,message:e.data.message,card:e.data.card.key,ekycDone:e.data.ekycDone}):{success:!1,errorCode:e.data.errorCode,message:e.data.message}:{success:!1}},function(e){})},o.getDataFromStorage=function(){return r.getApplicationData()},o.clearAppData=function(){r.removeApplicationData()}}]);e.exports=r.name}()}});
//# sourceMappingURL=17a4eb72bc75bcd4471323.js.map