webpackJsonp([20],{"./src/app/components/journey/app-retrieval/app-retrieval.component.html":/*!*******************************************************************************!*\
  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.html ***!
  \*******************************************************************************/
function(e,r){e.exports='<div class="view-container header-spacer"> <form name=retrievalForm autocomplete=off focus-on-error novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class="col-md-12 col-sm-12 col-xs-12"> <h1 class="h3 no-margin-t" tabindex=0>Retrieve Application </h1></div> <div class="col-md-12 col-sm-12 col-xs-12"> <h2 class="brand-bar no-margin-top" tabindex=0>Please enter the details below to retrieve your application. </h2></div> </div> <alert-msg ng-if=$ctrl.error type=ERROR> Sorry - that input did not match our records. Please check and re-enter your PAN and mobile number for validation. </alert-msg> <alert-msg ng-if=$ctrl.sessionError type=ERROR> Your session has timed out due to inactivity. </alert-msg> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div class=form-group> <label for=pan>PAN</label> <div ng-class="{\'has-error\': retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.model.submitted)}"> <input type=text id=pan aria-describedby=panErrMsg trim auto-caps class=form-control alpha-num=10 ng-paste=$ctrl.pasteInput(1,$event) name=pan ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder="As per ID" ng-disabled=$ctrl.nonEdit aria-invalid="{{retrievalForm.pan.$invalid && (retrievalForm.pan.$touched || $ctrl.model.submitted)}}" required> </div> <div id=panErrMsg ng-class="{\'has-error\': (retrievalForm.pan.$invalid)}"> <validation-msg ng-if="(retrievalForm.pan.$error.required && retrievalForm.pan.$touched) ||(retrievalForm.pan.$error.required && $ctrl.model.submitted)"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if="retrievalForm.pan.$error.pattern && retrievalForm.pan.$touched"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class="col-md-4 col-sm-6 col-xs-12"> <div class="form-group line-spacer"> <label for=mobileNo>Mobile number</label> <div class=input-group ng-class="{\'has-error\': retrievalForm.mobileNo.$invalid  &&  (retrievalForm.mobileNo.$touched  || $ctrl.model.submitted)}"> <span class=input-group-addon id=countryCode aria-hidden=true tabindex=-1> <span class="flag in" style=background-image:url(resources/images/country-flags-sprite.png)></span> +91</span> <input type=tel trim id=mobileNo name=mobileNo aria-describedby="countryCode mobileErrMsg" ng-model=$ctrl.model.mobileNo class="form-control has-block" ng-minlength=10 ng-maxlength=10 ng-pattern=/^[6-9][0-9]/ only-number=10 aria-invalid="{{retrievalForm.mobileNo.$invalid  &&  (retrievalForm.mobileNo.$touched  || $ctrl.model.submitted)}}" required> </div> <div id=mobileErrMsg ng-class="{\'has-error\': (retrievalForm.mobileNo.$invalid)}"> <validation-msg ng-if="(retrievalForm.mobileNo.$error.required && retrievalForm.mobileNo.$touched) ||(retrievalForm.mobileNo.$error.required && $ctrl.model.submitted)"> Please enter your mobile number to retrieve your application. </validation-msg> <validation-msg ng-if="retrievalForm.mobileNo.$error.minlength && retrievalForm.mobileNo.$touched"> Please enter at least 10 numbers. </validation-msg> <validation-msg ng-if="!retrievalForm.mobileNo.$error.minlength && retrievalForm.mobileNo.$error.pattern && retrievalForm.mobileNo.$touched && !retrievalForm.mobileNo.$error.minlength"> Your mobile phone number must begin with 6, 7, 8 or 9. Please check and re-enter. </validation-msg> </div> </div> </div> </div> <div class=row> <div class="col-md-12 col-sm-12 col-xs-12"> <hr class=line-spacer> </div> </div> <div class=row> <div class="col-md-12 col-sm-12 col-xs-12 text-right"> <button class="button-primary no-margin-t-xs" ng-click=$ctrl.next(retrievalForm.$valid)>Continue</button> </div> </div> </form> </div>'},"./src/app/components/journey/app-retrieval/app-retrieval.component.js":/*!*****************************************************************************!*\
  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.js ***!
  \*****************************************************************************/
function(e,r,o){!function(){"use strict";var r=o(/*! angular */"./node_modules/angular/index.js");o(/*! ./app-retrieval.component.scss */"./src/app/components/journey/app-retrieval/app-retrieval.component.scss"),o(/*! ./app-retrieval.component.service */"./src/app/components/journey/app-retrieval/app-retrieval.component.service.js");var a=r.module("app").component("retrieval",{template:o(/*! ./app-retrieval.component.html */"./src/app/components/journey/app-retrieval/app-retrieval.component.html"),controller:["$scope","$state","$anchorScroll","$rootScope","analyticService","retrieval","UtilService",function(e,r,o,a,t,i,n){var l=this;l.$onInit=function(){l.sessionError=a.sessionError,l.initControls(),t.trackPageLoad(t.pageList.retrieve),o()},l.initControls=function(){l.model={},l.model.phoneCode="91",i.getDataFromStorage()&&(i.getDataFromStorage().primaryApplicant?l.model.pan=i.getDataFromStorage().primaryApplicant.pan?i.getDataFromStorage().primaryApplicant.pan:null:i.getDataFromStorage().stateData?l.model.pan=i.getDataFromStorage().stateData.pan?i.getDataFromStorage().stateData.pan:null:l.model.pan=null,i.clearAppData()),l.model.pan?l.nonEdit=!0:l.nonEdit=!1,l.error=!1},l.next=function(o){if(a.sessionError=!1,l.sessionError=!1,o){var s={pan:l.model.pan,dialCode:l.model.phoneCode,mobile:l.model.mobileNo},p={robocheck:l.robocheck?l.robocheck:""};i.retrievalApp(s,p).then(function(e){if(e.success){l.error=!1;var o={stateData:{otpData:{pan:l.model.pan,arn:e.arn,dialCode:l.model.phoneCode,mobile:l.model.mobileNo,txnId:e.txnId}}};console.log("Data received from backend=="+JSON.stringify(o)),i.setDataInStorage(o,function(){r.go("app.journey.otp-verify",{otpData:{pan:l.model.pan,mobile:l.model.mobileNo,dialCode:l.model.phoneCode,email:"sk@sk.com",arn:e.arn,txnId:e.txnId}})})}else l.error=!0}),t.buttonList.buttonClick.event_content="Retrive Application Input: Continue",t.trackUserAction(t.buttonList.buttonClick)}else l.model.submitted=!0,n.focusOnInvalid(e.retrievalForm.$name)}}]});e.exports=a.name}()},"./src/app/components/journey/app-retrieval/app-retrieval.component.scss":/*!*******************************************************************************!*\
  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.scss ***!
  \*******************************************************************************/
function(e,r){},"./src/app/components/journey/app-retrieval/app-retrieval.component.service.js":/*!*************************************************************************************!*\
  !*** ./src/app/components/journey/app-retrieval/app-retrieval.component.service.js ***!
  \*************************************************************************************/
function(e,r){!function(){"use strict";var r=angular.module("app").service("retrieval",["$rootScope","appState","$http","CONFIG",function(e,r,o,a){this.setDataInStorage=function(e,o){var a=angular.merge({},r.getApplicationData(),e);r.setApplicationData(a),o(null,e)},this.retrievalApp=function(r,t){var i,n;return e.integrationsActive?(n="POST",i=a.apiUrl+"/retrieveapplication/otpgenerate?hash_id="+Math.random()):(n="GET",i="resources/data/mock/otp-verify/retrieve_otp_generate.json"),o({method:n,url:i,headers:{"Content-Type":"application/json"},data:JSON.stringify(r),params:t}).then(function(e){if(e&&200===e.status&&e.data)return e.data;e&&e.validationErrors},function(e){})},this.getDataFromStorage=function(){return r.getApplicationData()},this.clearAppData=function(){r.removeApplicationData(),r.clearContactDetails()}}]);e.exports=r.name}()}});
//# sourceMappingURL=2e230dc849b54ad62fd820.js.map