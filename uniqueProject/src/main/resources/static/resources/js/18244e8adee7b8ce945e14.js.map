{"version":3,"sources":["webpack:///resources/js/18244e8adee7b8ce945e14.js","webpack:///./src/app/components/journey/step2/step2.component.html","webpack:///./src/app/components/journey/step2/step2.component.js","webpack:///./src/app/components/journey/step2/step2.component.service.js"],"names":["webpackJsonp","./src/app/components/journey/step2/step2.component.html","module","exports","./src/app/components/journey/step2/step2.component.js","__webpack_require__","step2Controller","$rootScope","$state","$scope","$anchorScroll","step2Service","analyticService","UtilService","journeyService","vm","this","isStaffJourney","showSelectedCard","showARN","$onInit","stepsHeader","currentStep","initModel","trackPageLoad","pageList","aadhaarPanInput","model","errorMsg","params","step2data","errorCode","pasteInput","value","e","pastedText","window","clipboardData","getData","replace","aadhaar","pan","mobileNo","next","isValid","kycData","aadhar","toUpperCase","securityParams","robocheck","kycValidate","then","result","primaryApplicant","setDataInStorage","go","otpData","mobile","dialCode","email","transactionNumber","buttonList","error","event_content","trackUserAction","leadData","statusCode","leadReason","leadGenerationReason","buttonClick","submitted","focusOnInvalid","angular","step2Comp","component","template","controller","name","./src/app/components/journey/step2/step2.component.scss","./src/app/components/journey/step2/step2.component.service.js","service","$q","appState","$http","CONFIG","self","apiURL","httpMethod","defer","integrationsActive","apiUrl","Math","random","method","url","headers","Content-Type","data","JSON","stringify","response","status","resolve","reject","promise","formDetails","callback","mergeApplicationData","getContactDetails"],"mappings":"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","file":"resources/js/18244e8adee7b8ce945e14.js","sourcesContent":["webpackJsonp([14],{\n\n/***/ \"./src/app/components/journey/step2/step2.component.html\":\n/* unknown exports provided */\n/* all exports used */\n/*!***************************************************************!*\\\n  !*** ./src/app/components/journey/step2/step2.component.html ***!\n  \\***************************************************************/\n/***/ (function(module, exports) {\n\nmodule.exports = \"<form name=kycForm autocomplete=off novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <alert-msg ng-if=$ctrl.errorMsg type=ERROR> {{$ctrl.errorMsg}} </alert-msg> </div> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h1 class=\\\"brand-bar no-margin-top\\\"> Personal Details </h1> <h2 class=\\\"h5 no-margin-t\\\"> <b>Please provide your details below:</b> </h2> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=form-group> <label for=pan>PAN</label> <div ng-class=\\\"{'has-error': kycForm.pan.$invalid && (kycForm.pan.$touched || $ctrl.model.submitted)}\\\"> <input type=text id=pan name=pan trim auto-caps class=form-control alpha-num=10 aria-describedby=panErrMsg ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder=\\\"As per ID\\\" aria-invalid=\\\"{{kycForm.pan.$invalid && (kycForm.pan.$touched || $ctrl.model.submitted)}}\\\" required> </div> <div id=panErrMsg ng-class=\\\"{'has-error': kycForm.pan.$invalid}\\\"> <validation-msg ng-if=\\\"kycForm.pan.$error.required && (kycForm.pan.$touched || $ctrl.model.submitted)\\\"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if=\\\"kycForm.pan.$error.pattern && kycForm.pan.$touched\\\"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=aadhar>Virtual ID/Aadhaar Number</label> <div ng-class=\\\"{'has-error': kycForm.aadhar.$invalid && ($ctrl.model.submitted || kycForm.aadhar.$touched)}\\\"> <input type=tel id=aadhar name=aadhar only-number=16 class=form-control aria-describedby=aadharErrMsg ng-trim=true ng-model=$ctrl.model.aadhaar onkeypress=\\\"if(0==this.value.length&&32===event.charCode)return!1\\\" ng-minlength=12 ng-pattern=/^[2-9][0-9]{11}$|^[0-9]{16}$/ placeholder=\\\"As per ID\\\" aria-invalid=\\\"{{kycForm.aadhar.$invalid && ($ctrl.model.submitted || kycForm.aadhar.$touched)}}\\\" required> </div> <div id=aadharErrMsg ng-class=\\\"{'has-error': kycForm.aadhar.$invalid}\\\"> <validation-msg ng-if=\\\"kycForm.aadhar.$error.required && (kycForm.aadhar.$touched || $ctrl.model.submitted)\\\"> Please make sure you have entered your Virtual ID/Aadhaar number to continue with your application. </validation-msg> <validation-msg ng-if=\\\"(kycForm.aadhar.$error.minlength || kycForm.aadhar.$error.pattern) && kycForm.aadhar.$touched\\\"> Please input a valid Virtual ID/Aadhaar number to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=\\\"row line-spacer\\\"> <div class=\\\"col-xs-12 col-md-12 col-sm-12\\\"> <h2 class=\\\"h5 no-margin-t\\\"> <b>Declaration:</b> </h2> <ol class=no-margin-b> <li> I authorize HSBC, India to validate my Permanent Account Number (PAN) as issued by Income Tax Department. </li> <li> I give my consent and authorize HSBC, India to verify my identity details through the Aadhaar database held with Unique Identification Authority of India (UIDAI). I authorize HSBC to send my OTP validation to UIDAI and obtain my demographic and other personal details for the purpose of this card application and also for any subsequent verification, if required.</li> <li> I declare that no other account has been opened nor will be opened using OTP based KYC either with HSBC or with any other Bank in India using UIDAI's OTP based KYC. </li> <li> I understand that accounts opened using OTP based e-KYC shall not be allowed for more than one year, within which Customer Due Diligence (CDD) procedure as mandated by RBI or as advised by HSBC will be required to be completed by me. I agree to comply with KYC requirements as advised by HSBC and understand that if the CDD procedure is not completed within a year, all operations to my Credit Card account will be blocked.</li> <li> I authorize HSBC to upload/refresh/update the demographic and other personal details in the Central KYC Registry in terms of the provisions of the Prevention of Money Laundering Act and Rules notified thereunder from time to time and create a new or update an existing KYC number that has been provided with the application, as per the operating guidelines issued by the CKYC Registrar and the Reserve Bank of India. </li> </ol> </div> </div> <div class=row> <div class=\\\"col-xs-12 col-md-12 col-sm-12\\\"> <step-footer show-continue=true continue-callback=$ctrl.next(kycForm.$valid)> </step-footer> </div> </div> </form>\";\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step2/step2.component.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*************************************************************!*\\\n  !*** ./src/app/components/journey/step2/step2.component.js ***!\n  \\*************************************************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n(function () {\r\n    'use strict';\r\n    var angular = __webpack_require__(/*! angular */ \"./node_modules/angular/index.js\");\r\n    __webpack_require__(/*! ./step2.component.service */ \"./src/app/components/journey/step2/step2.component.service.js\");\r\n    __webpack_require__(/*! ./step2.component.scss */ \"./src/app/components/journey/step2/step2.component.scss\");\r\n\r\n    function step2Controller($rootScope, $state, $scope, $anchorScroll, step2Service, analyticService, UtilService, journeyService) {\r\n        var vm = this, leadGenerationReason = \"\";\r\n        vm.isStaffJourney = journeyService.isStaffJourney();\r\n        $rootScope.showSelectedCard = true;\r\n        $rootScope.showARN = false;\r\n\r\n        vm.$onInit = function () {\r\n            $rootScope.stepsHeader.currentStep = 1;\r\n            initModel();\r\n            $anchorScroll();\r\n            analyticService.trackPageLoad(analyticService.pageList.aadhaarPanInput);\r\n        };\r\n\r\n        var initModel = function () {\r\n            vm.model = {};\r\n            vm.errorMsg = \"\";\r\n\r\n            if ($state.params.step2data) {\r\n                if ($state.params.step2data.errorCode == 1002) {\r\n                    vm.errorMsg = \"Sorry! Your Aadhaar/PAN details seem to be incorrect. Please try again.\";\r\n                } else if ($state.params.step2data.errorCode == 1014) {\r\n                    // 1014: Unable to parse PAN response\r\n                    if (vm.isStaffJourney) {\r\n                        vm.errorMsg = \"Sorry! There seems to be a technical problem. Your HSBC representative will inform you of the next steps to complete the application.\"\r\n                    } else {\r\n                        vm.errorMsg = \"Sorry! There seems to be a technical problem. We are unable to progress further. We will contact you within 2 working days to proceed with your Credit Card application.\"\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        vm.pasteInput = function (value, e) {\r\n            var pastedText = '';\r\n            if (window.clipboardData && window.clipboardData.getData) { // IE\r\n                pastedText = window.clipboardData.getData('Text');\r\n            } else if (e.clipboardData && e.clipboardData.getData) {\r\n                pastedText = e.clipboardData.getData('text/plain');\r\n            }\r\n            pastedText = pastedText.replace(/\\s/g, '');\r\n            switch (value) {\r\n                case 2:\r\n                    vm.model.aadhaar = '';\r\n                    vm.model.aadhaar = pastedText;\r\n                    break;\r\n                case 1:\r\n                    vm.model.pan = '';\r\n                    vm.model.pan = pastedText;\r\n                    break;\r\n                case 0:\r\n                    vm.model.mobileNo = pastedText;\r\n                    break;\r\n            }\r\n        };\r\n\r\n        vm.next = function (isValid) {\r\n            if (isValid) {\r\n                var kycData = {\r\n                    \"aadhar\": vm.model.aadhaar,\r\n                    \"pan\": vm.model.pan.toUpperCase()\r\n                };\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                step2Service.kycValidate(kycData, securityParams).then(function (result) {\r\n                    if (result.errorCode == 1) {\r\n                        var kycData = {\r\n                            \"primaryApplicant\": {\r\n                                \"pan\": vm.model.pan,\r\n                                \"aadhaar\": vm.model.aadhaar\r\n                            }\r\n                        };\r\n                        step2Service.setDataInStorage(kycData);\r\n                        $state.go('app.journey.otp-verify', {\r\n                            otpData: {\r\n                                mobile: 3210,\r\n                                dialCode: 91,\r\n                                email: 'sk@sk.com',\r\n                                transactionNumber: result.transactionNumber\r\n                            }\r\n                        });\r\n                    } else if (result.errorCode == 1001) {\r\n                        vm.errorMsg = \"Sorry! Your Aadhaar/PAN details seem to be incorrect. Please try again.\";\r\n                        $anchorScroll();\r\n                    } else if (result.errorCode == 1016 || result.errorCode == 1018) {\r\n                        // 1016: Maximum number of Aadhaar attempt\r\n                        // 1018:  Mobile number is not registered with Aadhaar\r\n                        analyticService.buttonList.error.event_content = result.errorCode == 1016 ? \"Aadhaar/Pan input - max attempt exceeded\" : \"Mobile number not registered with Aadhaar\";\r\n                        analyticService.trackUserAction(analyticService.buttonList.error);\r\n                        $state.go(\"app.journey.lead-generation\", {\r\n                            leadData: {\r\n                                statusCode: result.errorCode,\r\n                                leadReason: result.leadGenerationReason\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n                analyticService.buttonList.buttonClick.event_content = \"continue\";\r\n                analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n            } else {\r\n                vm.model.submitted = true;\r\n                //$anchorScroll();\r\n                UtilService.focusOnInvalid(\"kycForm\");\r\n            }\r\n        };\r\n    }\r\n\r\n    var step2Comp = angular.module('journey.module').component('step2', {\r\n        template: __webpack_require__(/*! ./step2.component.html */ \"./src/app/components/journey/step2/step2.component.html\"),\r\n        controller: ['$rootScope', '$state', '$scope', '$anchorScroll', 'step2Service', 'analyticService', 'UtilService', 'journeyService', step2Controller]\r\n    })\r\n    module.exports = step2Comp.name;\r\n})();\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step2/step2.component.scss\":\n/* unknown exports provided */\n/* all exports used */\n/*!***************************************************************!*\\\n  !*** ./src/app/components/journey/step2/step2.component.scss ***!\n  \\***************************************************************/\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"./src/app/components/journey/step2/step2.component.service.js\":\n/* unknown exports provided */\n/* all exports used */\n/*!*********************************************************************!*\\\n  !*** ./src/app/components/journey/step2/step2.component.service.js ***!\n  \\*********************************************************************/\n/***/ (function(module, exports) {\n\n(function () {\r\n    'use strict';\r\n\r\n    var step2Service = angular.module('journey.module').service('step2Service', ['$rootScope', '$q', 'appState', '$http', 'CONFIG', function ($rootScope, $q, appState, $http, CONFIG) {\r\n        var self = this;\r\n\r\n        self.kycValidate = function (kycData, params) {\r\n            var apiURL, httpMethod, defer = $q.defer();\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/kyc/aadhaarpanvalidate' + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step2/kyc_aadhar_pan_validate.json';\r\n            }\r\n            $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(kycData),\r\n                params: params\r\n            }).then(function (response) {\r\n                if (response && response.status === 200 && response.data) {\r\n                    defer.resolve(response.data);\r\n                } else {\r\n                    defer.reject();\r\n                }\r\n            }, function (response) {\r\n                defer.reject();\r\n            });\r\n            return defer.promise;\r\n        };\r\n\r\n\r\n        self.setDataInStorage = function (formDetails, callback) {\r\n            // var arnData = angular.merge({}, appState.getApplicationData(), formDetails);\r\n            appState.mergeApplicationData(formDetails);\r\n            // callback(null, formDetails);\r\n        };\r\n\r\n        self.getContactDetails = appState.getContactDetails;\r\n\r\n        // self.getDataFromStorage = function () {\r\n        //     var modelDTO = {},\r\n        //         localState = appState.getApplicationData();\r\n\r\n        //     if (localState && localState.primaryApplicant) {\r\n        //         modelDTO.givenName = localState.primaryApplicant.fullName ? localState.primaryApplicant.fullName : null;\r\n        //         modelDTO.pan = localState.pan ? localState.pan : null;\r\n        //         modelDTO.aadhaar = localState.aadhar ? localState.aadhar : null;\r\n        //         modelDTO.city = \"NA\";\r\n        //         modelDTO.annualIncome = \"nill\";\r\n        //         modelDTO.mobileNo = localState.primaryApplicant.mobileNo ? localState.primaryApplicant.mobileNo : null;\r\n        //         modelDTO.email = localState.primaryApplicant.email ? localState.primaryApplicant.email : null;\r\n        //     }\r\n\r\n        //     return modelDTO;\r\n        // };\r\n    }]);\r\n\r\n    module.exports = step2Service.name;\r\n})();\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// resources/js/18244e8adee7b8ce945e14.js","module.exports = \"<form name=kycForm autocomplete=off novalidate> <input type=text class=hidden-field ng-model=$ctrl.robocheck tabindex=-1> <div class=row> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <alert-msg ng-if=$ctrl.errorMsg type=ERROR> {{$ctrl.errorMsg}} </alert-msg> </div> <div class=\\\"col-md-12 col-sm-12 col-xs-12\\\"> <h1 class=\\\"brand-bar no-margin-top\\\"> Personal Details </h1> <h2 class=\\\"h5 no-margin-t\\\"> <b>Please provide your details below:</b> </h2> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=form-group> <label for=pan>PAN</label> <div ng-class=\\\"{'has-error': kycForm.pan.$invalid && (kycForm.pan.$touched || $ctrl.model.submitted)}\\\"> <input type=text id=pan name=pan trim auto-caps class=form-control alpha-num=10 aria-describedby=panErrMsg ng-model=$ctrl.model.pan ng-pattern=/^([a-zA-Z]{5})(\\\\d{4})([a-zA-Z]{1})$/ maxlength=10 placeholder=\\\"As per ID\\\" aria-invalid=\\\"{{kycForm.pan.$invalid && (kycForm.pan.$touched || $ctrl.model.submitted)}}\\\" required> </div> <div id=panErrMsg ng-class=\\\"{'has-error': kycForm.pan.$invalid}\\\"> <validation-msg ng-if=\\\"kycForm.pan.$error.required && (kycForm.pan.$touched || $ctrl.model.submitted)\\\"> Please make sure you have entered your PAN to continue with your application. </validation-msg> <validation-msg ng-if=\\\"kycForm.pan.$error.pattern && kycForm.pan.$touched\\\"> Please input a valid PAN to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=row> <div class=\\\"col-md-4 col-sm-6 col-xs-12\\\"> <div class=\\\"form-group line-spacer\\\"> <label for=aadhar>Virtual ID/Aadhaar Number</label> <div ng-class=\\\"{'has-error': kycForm.aadhar.$invalid && ($ctrl.model.submitted || kycForm.aadhar.$touched)}\\\"> <input type=tel id=aadhar name=aadhar only-number=16 class=form-control aria-describedby=aadharErrMsg ng-trim=true ng-model=$ctrl.model.aadhaar onkeypress=\\\"if(0==this.value.length&&32===event.charCode)return!1\\\" ng-minlength=12 ng-pattern=/^[2-9][0-9]{11}$|^[0-9]{16}$/ placeholder=\\\"As per ID\\\" aria-invalid=\\\"{{kycForm.aadhar.$invalid && ($ctrl.model.submitted || kycForm.aadhar.$touched)}}\\\" required> </div> <div id=aadharErrMsg ng-class=\\\"{'has-error': kycForm.aadhar.$invalid}\\\"> <validation-msg ng-if=\\\"kycForm.aadhar.$error.required && (kycForm.aadhar.$touched || $ctrl.model.submitted)\\\"> Please make sure you have entered your Virtual ID/Aadhaar number to continue with your application. </validation-msg> <validation-msg ng-if=\\\"(kycForm.aadhar.$error.minlength || kycForm.aadhar.$error.pattern) && kycForm.aadhar.$touched\\\"> Please input a valid Virtual ID/Aadhaar number to continue with your application. </validation-msg> </div> </div> </div> </div> <div class=\\\"row line-spacer\\\"> <div class=\\\"col-xs-12 col-md-12 col-sm-12\\\"> <h2 class=\\\"h5 no-margin-t\\\"> <b>Declaration:</b> </h2> <ol class=no-margin-b> <li> I authorize HSBC, India to validate my Permanent Account Number (PAN) as issued by Income Tax Department. </li> <li> I give my consent and authorize HSBC, India to verify my identity details through the Aadhaar database held with Unique Identification Authority of India (UIDAI). I authorize HSBC to send my OTP validation to UIDAI and obtain my demographic and other personal details for the purpose of this card application and also for any subsequent verification, if required.</li> <li> I declare that no other account has been opened nor will be opened using OTP based KYC either with HSBC or with any other Bank in India using UIDAI's OTP based KYC. </li> <li> I understand that accounts opened using OTP based e-KYC shall not be allowed for more than one year, within which Customer Due Diligence (CDD) procedure as mandated by RBI or as advised by HSBC will be required to be completed by me. I agree to comply with KYC requirements as advised by HSBC and understand that if the CDD procedure is not completed within a year, all operations to my Credit Card account will be blocked.</li> <li> I authorize HSBC to upload/refresh/update the demographic and other personal details in the Central KYC Registry in terms of the provisions of the Prevention of Money Laundering Act and Rules notified thereunder from time to time and create a new or update an existing KYC number that has been provided with the application, as per the operating guidelines issued by the CKYC Registrar and the Reserve Bank of India. </li> </ol> </div> </div> <div class=row> <div class=\\\"col-xs-12 col-md-12 col-sm-12\\\"> <step-footer show-continue=true continue-callback=$ctrl.next(kycForm.$valid)> </step-footer> </div> </div> </form>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step2/step2.component.html\n// module id = ./src/app/components/journey/step2/step2.component.html\n// module chunks = 14","(function () {\r\n    'use strict';\r\n    var angular = require('angular');\r\n    require('./step2.component.service');\r\n    require('./step2.component.scss');\r\n\r\n    function step2Controller($rootScope, $state, $scope, $anchorScroll, step2Service, analyticService, UtilService, journeyService) {\r\n        var vm = this, leadGenerationReason = \"\";\r\n        vm.isStaffJourney = journeyService.isStaffJourney();\r\n        $rootScope.showSelectedCard = true;\r\n        $rootScope.showARN = false;\r\n\r\n        vm.$onInit = function () {\r\n            $rootScope.stepsHeader.currentStep = 1;\r\n            initModel();\r\n            $anchorScroll();\r\n            analyticService.trackPageLoad(analyticService.pageList.aadhaarPanInput);\r\n        };\r\n\r\n        var initModel = function () {\r\n            vm.model = {};\r\n            vm.errorMsg = \"\";\r\n\r\n            if ($state.params.step2data) {\r\n                if ($state.params.step2data.errorCode == 1002) {\r\n                    vm.errorMsg = \"Sorry! Your Aadhaar/PAN details seem to be incorrect. Please try again.\";\r\n                } else if ($state.params.step2data.errorCode == 1014) {\r\n                    // 1014: Unable to parse PAN response\r\n                    if (vm.isStaffJourney) {\r\n                        vm.errorMsg = \"Sorry! There seems to be a technical problem. Your HSBC representative will inform you of the next steps to complete the application.\"\r\n                    } else {\r\n                        vm.errorMsg = \"Sorry! There seems to be a technical problem. We are unable to progress further. We will contact you within 2 working days to proceed with your Credit Card application.\"\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        vm.pasteInput = function (value, e) {\r\n            var pastedText = '';\r\n            if (window.clipboardData && window.clipboardData.getData) { // IE\r\n                pastedText = window.clipboardData.getData('Text');\r\n            } else if (e.clipboardData && e.clipboardData.getData) {\r\n                pastedText = e.clipboardData.getData('text/plain');\r\n            }\r\n            pastedText = pastedText.replace(/\\s/g, '');\r\n            switch (value) {\r\n                case 2:\r\n                    vm.model.aadhaar = '';\r\n                    vm.model.aadhaar = pastedText;\r\n                    break;\r\n                case 1:\r\n                    vm.model.pan = '';\r\n                    vm.model.pan = pastedText;\r\n                    break;\r\n                case 0:\r\n                    vm.model.mobileNo = pastedText;\r\n                    break;\r\n            }\r\n        };\r\n\r\n        vm.next = function (isValid) {\r\n            if (isValid) {\r\n                var kycData = {\r\n                    \"aadhar\": vm.model.aadhaar,\r\n                    \"pan\": vm.model.pan.toUpperCase()\r\n                };\r\n                var securityParams = {\r\n                    robocheck: vm.robocheck ? vm.robocheck : ''\r\n                };\r\n                step2Service.kycValidate(kycData, securityParams).then(function (result) {\r\n                    if (result.errorCode == 1) {\r\n                        var kycData = {\r\n                            \"primaryApplicant\": {\r\n                                \"pan\": vm.model.pan,\r\n                                \"aadhaar\": vm.model.aadhaar\r\n                            }\r\n                        };\r\n                        step2Service.setDataInStorage(kycData);\r\n                        $state.go('app.journey.otp-verify', {\r\n                            otpData: {\r\n                                mobile: 3210,\r\n                                dialCode: 91,\r\n                                email: 'sk@sk.com',\r\n                                transactionNumber: result.transactionNumber\r\n                            }\r\n                        });\r\n                    } else if (result.errorCode == 1001) {\r\n                        vm.errorMsg = \"Sorry! Your Aadhaar/PAN details seem to be incorrect. Please try again.\";\r\n                        $anchorScroll();\r\n                    } else if (result.errorCode == 1016 || result.errorCode == 1018) {\r\n                        // 1016: Maximum number of Aadhaar attempt\r\n                        // 1018:  Mobile number is not registered with Aadhaar\r\n                        analyticService.buttonList.error.event_content = result.errorCode == 1016 ? \"Aadhaar/Pan input - max attempt exceeded\" : \"Mobile number not registered with Aadhaar\";\r\n                        analyticService.trackUserAction(analyticService.buttonList.error);\r\n                        $state.go(\"app.journey.lead-generation\", {\r\n                            leadData: {\r\n                                statusCode: result.errorCode,\r\n                                leadReason: result.leadGenerationReason\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n                analyticService.buttonList.buttonClick.event_content = \"continue\";\r\n                analyticService.trackUserAction(analyticService.buttonList.buttonClick);\r\n            } else {\r\n                vm.model.submitted = true;\r\n                //$anchorScroll();\r\n                UtilService.focusOnInvalid(\"kycForm\");\r\n            }\r\n        };\r\n    }\r\n\r\n    var step2Comp = angular.module('journey.module').component('step2', {\r\n        template: require('./step2.component.html'),\r\n        controller: ['$rootScope', '$state', '$scope', '$anchorScroll', 'step2Service', 'analyticService', 'UtilService', 'journeyService', step2Controller]\r\n    })\r\n    module.exports = step2Comp.name;\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step2/step2.component.js\n// module id = ./src/app/components/journey/step2/step2.component.js\n// module chunks = 14","(function () {\r\n    'use strict';\r\n\r\n    var step2Service = angular.module('journey.module').service('step2Service', ['$rootScope', '$q', 'appState', '$http', 'CONFIG', function ($rootScope, $q, appState, $http, CONFIG) {\r\n        var self = this;\r\n\r\n        self.kycValidate = function (kycData, params) {\r\n            var apiURL, httpMethod, defer = $q.defer();\r\n            if ($rootScope.integrationsActive) {\r\n                httpMethod = \"POST\";\r\n                apiURL = CONFIG.apiUrl + '/kyc/aadhaarpanvalidate' + '?hash_id=' + Math.random();\r\n            } else {\r\n                httpMethod = \"GET\";\r\n                apiURL = 'resources/data/mock/step2/kyc_aadhar_pan_validate.json';\r\n            }\r\n            $http({\r\n                method: httpMethod,\r\n                url: apiURL,\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                data: JSON.stringify(kycData),\r\n                params: params\r\n            }).then(function (response) {\r\n                if (response && response.status === 200 && response.data) {\r\n                    defer.resolve(response.data);\r\n                } else {\r\n                    defer.reject();\r\n                }\r\n            }, function (response) {\r\n                defer.reject();\r\n            });\r\n            return defer.promise;\r\n        };\r\n\r\n\r\n        self.setDataInStorage = function (formDetails, callback) {\r\n            // var arnData = angular.merge({}, appState.getApplicationData(), formDetails);\r\n            appState.mergeApplicationData(formDetails);\r\n            // callback(null, formDetails);\r\n        };\r\n\r\n        self.getContactDetails = appState.getContactDetails;\r\n\r\n        // self.getDataFromStorage = function () {\r\n        //     var modelDTO = {},\r\n        //         localState = appState.getApplicationData();\r\n\r\n        //     if (localState && localState.primaryApplicant) {\r\n        //         modelDTO.givenName = localState.primaryApplicant.fullName ? localState.primaryApplicant.fullName : null;\r\n        //         modelDTO.pan = localState.pan ? localState.pan : null;\r\n        //         modelDTO.aadhaar = localState.aadhar ? localState.aadhar : null;\r\n        //         modelDTO.city = \"NA\";\r\n        //         modelDTO.annualIncome = \"nill\";\r\n        //         modelDTO.mobileNo = localState.primaryApplicant.mobileNo ? localState.primaryApplicant.mobileNo : null;\r\n        //         modelDTO.email = localState.primaryApplicant.email ? localState.primaryApplicant.email : null;\r\n        //     }\r\n\r\n        //     return modelDTO;\r\n        // };\r\n    }]);\r\n\r\n    module.exports = step2Service.name;\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/journey/step2/step2.component.service.js\n// module id = ./src/app/components/journey/step2/step2.component.service.js\n// module chunks = 14"],"sourceRoot":""}